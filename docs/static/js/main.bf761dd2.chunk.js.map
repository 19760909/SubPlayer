{"version":3,"sources":["utils/index.js","utils/assToVtt.js","components/Header.js","components/Subtitle.js","components/Blocks.js","components/Timeline.js","utils/languages.js","components/Toolset.js","components/Player.js","utils/translate.js","utils/md5.js","utils/storage.js","components/App.js","serviceWorker.js","index.js","i18n.js"],"names":["checkTime","time","test","sleep","ms","Promise","resolve","setTimeout","clamp","num","a","b","Math","max","min","secondToTime","seconds","moment","duration","format","trim","timeToSecond","asSeconds","urlToArr","url","$video","document","createElement","$track","default","kind","appendChild","onload","arr","Array","from","track","cues","map","item","index","editing","highlight","start","startTime","end","endTime","text","this","Infinity","toFixed","src","vttToUrl","vttText","URL","createObjectURL","Blob","type","arrToVtt","join","srtToVtt","srtText","concat","replace","readSubtitleFromFile","file","reject","reader","FileReader","name","split","pop","toLowerCase","result","ass","re_ass","RegExp","fixTime","length","line","m","match","filter","assToVtt","onerror","error","readAsText","escapeHTML","str","tag","momentDurationFormatSetup","Wrapper","styled","header","Logo","Description","span","Btn","div","File","input","Lang","Header","$subtitle","React","createRef","current","files","NProgress","set","getExt","includes","then","data","subtitles","props","updateSubtitles","toastr","success","t","done","catch","message","canPlayType","updateVideoUrl","className","href","version","value","lang","onClick","setLocale","ref","onChange","uploadSubtitle","bind","uploadVideo","downloadSubtitles","Component","Subtitle","state","editIndex","editSubtitle","warning","checkSubtitle","setState","updateSubtitle","removeSubtitle","mainHeight","mainWidth","currentIndex","headerHeight","width","height","rowHeight","scrollToIndex","rowCount","rowGetter","headerRowRenderer","style","flex","rowRenderer","key","rowData","overlapping","maxLength","defaultValue","e","target","disabled","onEdit","onUpdate","onRemove","Inner","Sub","SubText","Handle","Blocks","$subs","sub","subIsDroging","subLeftStart","subLeftDiff","art","highlightSubtitle","updateCurrentIndex","playing","event","pause","pageX","diffLength","indexOf","children","transform","grid","addEventListener","$sub","padding","beginTime","paddingLeft","paddingRight","left","onMouseDown","handleOnMouseDown","onMouseMove","handleOnMouseMove","subOnMouseDown","subOnMouseMove","right","findMatchedSubtitles","dequal","Canvas","canvas","Line","drawGrid","ctx","ruler","gap","font","clearRect","fillStyle","fillRect","fillText","Number","Timeline","$canvas","lineX","currentTime","floor","getContext","timelineHeight","baidu","zh","en","google","Button","button","Select","select","Player","translator","translators","languages","timeOffset","undoSubtitle","removeAllSubtitle","removeEmptySubtitle","removeCache","translate","marginRight","VideoBox","videoUrl","subtitleUrl","updateCurrentTime","getArt","option","loop","autoSize","subtitle","getInstance","window","requestAnimationFrame","once","player","on","template","switchUrl","revokeObjectURL","init","setTime","baiduTranslate","query","land","appid","salt","Date","now","searchParams","append","string","RotateLeft","lValue","iShiftBits","AddUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","FF","c","d","x","s","ac","y","z","F","GG","G","HH","H","II","I","WordToHex","lCount","WordToHexValue","WordToHexValue_temp","toString","substr","k","AA","BB","CC","DD","lWordCount","lMessageLength","lNumberOfWords_temp1","lNumberOfWords","lWordArray","lBytePosition","lByteCount","charCodeAt","ConvertToWordArray","utftext","n","String","fromCharCode","Utf8Encode","MD5","fetchJsonp","json","error_code","error_msg","trans_result","dst","googleTranslate","fetch","translatorName","limit","pLimit","all","Storage","storage","JSON","parse","localStorage","getItem","Object","assign","get","setItem","stringify","removeItem","GlobalStyle","createGlobalStyle","Main","App","inTranslation","history","uddateMainSize","body","clientHeight","clientWidth","resizeDebounce","func","wait","context","timeout","args","later","apply","clearTimeout","debounce","locationUrl","location","locationSubtitleUrl","decodeURIComponent","locationVideoUrl","storageSubtitles","response","headers","readSubtitleFromUrl","checkIndex","splice","previous","id","updateUrl","isUndo","updateSubtitleUrl","shift","push","findIndex","elink","display","download","click","removeChild","downloadFile","clean","reload","Fragment","Boolean","hostname","setTranslations","access","delete","update","your","removeEmpty","removeAll","offset","translateLenght","translateProgress","historyEmpty","description","uploadSubtitleErr","uploadVideoErr","btnUploadSubtitle","btnUploadVideo","btnDownloadSubtitle","greater","overlaps","operation","durationLimit","btnAddSubtitle","btnTimeOffsetMinus","btnTimeOffsetPlus","btnUndo","btnRemoveAll","btnRemoveEmpty","btnRemoveCache","btnBatchTranslate","to","use","options","timeOut","hideDuration","configure","minimum","showSpinner","ReactDOM","render","navigator","userAgent","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bf761dd2.chunk.js","sourcesContent":["import moment from 'moment';\nimport momentDurationFormatSetup from 'moment-duration-format';\nimport assToVtt from './assToVtt';\n\nmomentDurationFormatSetup(moment);\n\nexport function checkTime(time) {\n    return /^(\\d+):([0-5][0-9]):([0-5][0-9])\\.\\d{3}$/.test(time);\n}\n\nexport function isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);\n}\n\nexport function getExt(url) {\n    if (url.includes('?')) {\n        return getExt(url.split('?')[0]);\n    }\n\n    if (url.includes('#')) {\n        return getExt(url.split('#')[0]);\n    }\n\n    return url\n        .trim()\n        .toLowerCase()\n        .split('.')\n        .pop();\n}\n\nexport function sleep(ms = 0) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function checkDuration(duration) {\n    return /^\\d+\\.\\d{3}/.test(duration);\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function secondToTime(seconds) {\n    const duration = moment.duration(seconds, 'seconds');\n    return duration.format('hh:mm:ss.SSS', {\n        trim: false,\n    });\n}\n\nexport function timeToSecond(time) {\n    return moment.duration(time).asSeconds();\n}\n\nexport function debounce(func, wait, context) {\n    let timeout;\n    return function fn(...args) {\n        const later = function later() {\n            timeout = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n\nexport function urlToArr(url) {\n    return new Promise(resolve => {\n        const $video = document.createElement('video');\n        const $track = document.createElement('track');\n        $track.default = true;\n        $track.kind = 'metadata';\n        $video.appendChild($track);\n        $track.onload = () => {\n            const arr = Array.from($track.track.cues).map((item, index) => {\n                return {\n                    editing: false,\n                    highlight: false,\n                    index: index,\n                    start: secondToTime(item.startTime),\n                    end: secondToTime(item.endTime),\n                    text: item.text,\n                    get startTime() {\n                        return timeToSecond(this.start);\n                    },\n                    set startTime(time) {\n                        this.start = secondToTime(clamp(time, 0, Infinity));\n                    },\n                    get endTime() {\n                        return timeToSecond(this.end);\n                    },\n                    set endTime(time) {\n                        this.end = secondToTime(clamp(time, 0, Infinity));\n                    },\n                    get duration() {\n                        return (this.endTime - this.startTime).toFixed(3);\n                    },\n                    get overlapping() {\n                        return arr[index - 1] && this.startTime < arr[index - 1].endTime;\n                    },\n                };\n            });\n            resolve(arr);\n        };\n        $track.src = url;\n    });\n}\n\nexport function vttToUrl(vttText) {\n    return URL.createObjectURL(\n        new Blob([vttText], {\n            type: 'text/vtt',\n        }),\n    );\n}\n\nexport function arrToVtt(arr) {\n    return (\n        'WEBVTT\\n\\n' +\n        arr\n            .map((item, index) => {\n                return (\n                    index + 1 + '\\n' + secondToTime(item.start) + ' --> ' + secondToTime(item.end) + '\\n' + item.text\n                );\n            })\n            .join('\\n\\n')\n    );\n}\n\nexport function srtToVtt(srtText) {\n    return 'WEBVTT \\r\\n\\r\\n'.concat(\n        srtText\n            .replace(/\\{\\\\([ibu])\\}/g, '</$1>')\n            .replace(/\\{\\\\([ibu])1\\}/g, '<$1>')\n            .replace(/\\{([ibu])\\}/g, '<$1>')\n            .replace(/\\{\\/([ibu])\\}/g, '</$1>')\n            .replace(/(\\d\\d:\\d\\d:\\d\\d),(\\d\\d\\d)/g, '$1.$2')\n            .replace(/{[\\s\\S]*?}/g, '')\n            .concat('\\r\\n\\r\\n'),\n    );\n}\n\nexport function readSubtitleFromFile(file) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        const type = file.name\n            .split('.')\n            .pop()\n            .toLowerCase();\n        reader.onload = () => {\n            if (type === 'srt') {\n                resolve(srtToVtt(reader.result));\n            } else if (type === 'ass') {\n                resolve(assToVtt(reader.result));\n            } else {\n                resolve(reader.result.replace(/{[\\s\\S]*?}/g, ''));\n            }\n        };\n        reader.onerror = error => {\n            reject(error);\n        };\n        reader.readAsText(file);\n    });\n}\n\nexport function readSubtitleFromUrl(url) {\n    let type;\n    return fetch(url)\n        .then(response => {\n            type = response.headers.get('Content-Type');\n            return response.text();\n        })\n        .then(text => {\n            if (/x-subrip/gi.test(type)) {\n                return srtToVtt(text);\n            }\n            return text;\n        })\n        .catch(error => {\n            throw error;\n        });\n}\n\nexport function downloadFile(url, name) {\n    const elink = document.createElement('a');\n    elink.style.display = 'none';\n    elink.href = url;\n    elink.download = name;\n    document.body.appendChild(elink);\n    elink.click();\n    document.body.removeChild(elink);\n}\n\nexport function runPromisesInSeries(ps) {\n    return ps.reduce((p, next) => p.then(next), Promise.resolve());\n}\n\nexport function escapeHTML(str) {\n    return str.replace(\n        /[&<>'\"]/g,\n        tag =>\n            ({\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&#39;',\n                '\"': '&quot;',\n            }[tag] || tag),\n    );\n}\n\nexport function unescapeHTML(str) {\n    return str.replace(\n        /&amp;|&lt;|&gt;|&#39;|&quot;/g,\n        tag =>\n            ({\n                '&amp;': '&',\n                '&lt;': '<',\n                '&gt;': '>',\n                '&#39;': \"'\",\n                '&quot;': '\"',\n            }[tag] || tag),\n    );\n}\n","export default function assToVtt(ass) {\n    const re_ass = new RegExp(\n        'Dialogue:\\\\s\\\\d,' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '([^,]*),' +\n            '([^,]*),' +\n            '(?:[^,]*,){4}' +\n            '([\\\\s\\\\S]*)$',\n        'i',\n    );\n\n    function fixTime(time = '') {\n        return time\n            .split(/[:.]/)\n            .map((item, index, arr) => {\n                if (index === arr.length - 1) {\n                    if (item.length === 1) {\n                        return '.' + item + '00';\n                    } else if (item.length === 2) {\n                        return '.' + item + '0';\n                    }\n                } else {\n                    if (item.length === 1) {\n                        return (index === 0 ? '0' : ':0') + item;\n                    }\n                }\n\n                return index === 0 ? item : index === arr.length - 1 ? '.' + item : ':' + item;\n            })\n            .join('');\n    }\n\n    return (\n        'WEBVTT\\n\\n' +\n        ass\n            .split(/\\r?\\n/)\n            .map(line => {\n                const m = line.match(re_ass);\n                if (!m) return null;\n                return {\n                    start: fixTime(m[1].trim()),\n                    end: fixTime(m[2].trim()),\n                    text: m[5]\n                        .replace(/{[\\s\\S]*?}/g, '')\n                        .replace(/(\\\\N)/g, '\\n')\n                        .trim()\n                        .split(/\\r?\\n/)\n                        .map(item => item.trim())\n                        .join('\\n'),\n                };\n            })\n            .filter(line => line)\n            .map((line, index) => {\n                if (line) {\n                    return index + 1 + '\\n' + line.start + ' --> ' + line.end + '\\n' + line.text;\n                } else {\n                    return '';\n                }\n            })\n            .filter(line => line.trim())\n            .join('\\n\\n')\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { t, Translate } from 'react-i18nify';\nimport toastr from 'toastr';\nimport NProgress from 'nprogress';\nimport { readSubtitleFromFile, urlToArr, vttToUrl, getExt } from '../utils';\nimport { version } from '../../package.json';\n\nconst Wrapper = styled.header`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n\n    .left {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        padding-left: 20px;\n    }\n\n    .right {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .links {\n            margin-right: 20px;\n            a {\n                color: #ccc;\n                text-decoration: none;\n                margin-left: 20px;\n\n                &:hover {\n                    color: #fff;\n                }\n            }\n        }\n    }\n`;\n\nconst Logo = styled.a`\n    color: #fff;\n    font-size: 16px;\n    text-decoration: none;\n\n    .beta {\n        color: #67bf00;\n        font-size: 12px;\n    }\n`;\n\nconst Description = styled.span`\n    font-size: 13px;\n    font-style: italic;\n    padding-left: 20px;\n    opacity: 0.4;\n`;\n\nconst Btn = styled.div`\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    padding: 0 10px;\n    width: 170px;\n    border-left: 1px solid #000;\n    cursor: pointer;\n    overflow: hidden;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n`;\n\nconst File = styled.input`\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n`;\n\nconst Lang = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-right: 20px;\n    color: #ccc;\n    background-color: #1a536d;\n    width: 60px;\n    padding: 5px 0;\n    font-size: 12px;\n    border-radius: 15px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n\n    i {\n        margin-right: 5px;\n    }\n\n    span {\n        display: none;\n    }\n\n    &.lang-zh .en {\n        display: block;\n    }\n\n    &.lang-en .zh {\n        display: block;\n    }\n\n    &:hover {\n        color: #fff;\n        background-color: #03a9f4;\n    }\n`;\n\nexport default class Header extends React.Component {\n    $subtitle = React.createRef();\n    $video = React.createRef();\n\n    uploadSubtitle() {\n        if (this.$subtitle.current && this.$subtitle.current.files[0]) {\n            NProgress.start().set(0.5);\n            const file = this.$subtitle.current.files[0];\n            const type = getExt(file.name);\n            if (['vtt', 'srt', 'ass'].includes(type)) {\n                readSubtitleFromFile(file, type)\n                    .then(data => {\n                        const subtitleUrl = vttToUrl(data);\n                        urlToArr(subtitleUrl).then(subtitles => {\n                            this.props.updateSubtitles(subtitles, true).then(() => {\n                                toastr.success(t('uploadSubtitle'));\n                                NProgress.done();\n                            });\n                        });\n                    })\n                    .catch(error => {\n                        toastr.error(error.message);\n                        NProgress.done();\n                        throw error;\n                    });\n            } else {\n                NProgress.done();\n                toastr.error(t('uploadSubtitleErr'));\n            }\n        }\n    }\n\n    uploadVideo() {\n        if (this.$video.current && this.$video.current.files[0]) {\n            NProgress.start().set(0.5);\n            const file = this.$video.current.files[0];\n            const $video = document.createElement('video');\n            const canPlayType = $video.canPlayType(file.type);\n            if (canPlayType === 'maybe' || canPlayType === 'probably') {\n                const url = URL.createObjectURL(file);\n                this.props.updateVideoUrl(url);\n                toastr.success(t('uploadVideo'));\n            } else {\n                toastr.error(`${t('uploadVideoErr')}: ${file.type}`);\n            }\n            NProgress.done();\n        }\n    }\n\n    render() {\n        return (\n            <Wrapper>\n                <div className=\"left\">\n                    <Logo href=\"./\">\n                        SubPlayer.js <span className=\"beta\">Beta {version}</span>\n                    </Logo>\n                    <Description>\n                        <Translate value=\"description\" />\n                    </Description>\n                </div>\n                <div className=\"right\">\n                    <div className=\"links\">\n                        <a href=\"https://github.com/zhw2590582/SubPlayer\">Github</a>\n                    </div>\n                    <Lang\n                        className={`lang-${this.props.lang}`}\n                        onClick={() => {\n                            this.props.setLocale(this.props.lang === 'zh' ? 'en' : 'zh');\n                        }}\n                    >\n                        <i className=\"icon-language\"></i>\n                        <span className=\"zh\">中</span>\n                        <span className=\"en\">EN</span>\n                    </Lang>\n                    <Btn>\n                        <i className=\"icon-upload\"></i>\n                        <Translate value=\"btnUploadSubtitle\" />\n                        <File type=\"file\" name=\"file\" ref={this.$subtitle} onChange={this.uploadSubtitle.bind(this)} />\n                    </Btn>\n                    <Btn>\n                        <i className=\"icon-upload\"></i>\n                        <Translate value=\"btnUploadVideo\" />\n                        <File type=\"file\" name=\"file\" ref={this.$video} onChange={this.uploadVideo.bind(this)} />\n                    </Btn>\n                    <Btn onClick={this.props.downloadSubtitles.bind(this)}>\n                        <i className=\"icon-download\"></i>\n                        <Translate value=\"btnDownloadSubtitle\" />\n                    </Btn>\n                </div>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { t, Translate } from 'react-i18nify';\nimport toastr from 'toastr';\nimport { checkTime, timeToSecond, escapeHTML, unescapeHTML } from '../utils';\nimport { Table } from 'react-virtualized';\n\nconst Wrapper = styled.div`\n    flex: 1;\n    border-right: 1px solid rgb(36, 41, 45);\n    .ReactVirtualized__Table {\n        font-size: 12px;\n        background: #24292d;\n\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n\n        .ReactVirtualized__Table__headerRow {\n            background: #1c2022;\n            border-bottom: 1px solid rgb(36, 41, 45);\n\n            .row {\n                padding: 10px 5px;\n                font-style: normal;\n                font-weight: normal;\n                font-size: 14px;\n                text-align: center;\n                text-transform: none;\n            }\n        }\n\n        .ReactVirtualized__Table__row {\n            background-color: #1c2022;\n            border-bottom: 1px solid rgb(36, 41, 45);\n            transition: all 0.2s ease;\n\n            &.odd {\n                background-color: #2e3140;\n            }\n\n            &.highlight {\n                background-color: #2196f3;\n            }\n\n            &.overlapping {\n                background-color: #c75123;\n            }\n\n            .row {\n                padding: 10px 5px;\n                text-align: center;\n            }\n        }\n\n        .input,\n        .textarea {\n            border: none;\n            padding: 5px;\n            min-height: 30px;\n            font-size: 12px;\n            text-align: center;\n            color: #fff;\n            background-color: #3a3a3a;\n        }\n\n        .textarea {\n            resize: vertical;\n        }\n\n        p {\n            line-height: 1.5;\n            margin: 0;\n        }\n    }\n\n    .operation {\n        display: flex;\n        justify-content: center;\n\n        i {\n            width: 25px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n    }\n\n    .edit {\n        display: none;\n        width: 100%;\n        height: 100%;\n    }\n\n    .editing {\n        .noedit {\n            display: none;\n        }\n\n        .edit {\n            display: block;\n        }\n    }\n`;\n\nexport default class Subtitle extends React.Component {\n    state = {\n        editIndex: -1,\n        editSubtitle: {},\n    };\n\n    checkSubtitle() {\n        const { editIndex, editSubtitle } = this.state;\n        const { subtitles } = this.props;\n        if (editIndex !== -1) {\n            if (!checkTime(editSubtitle.start)) {\n                toastr.error(t('startTime'));\n                return false;\n            }\n\n            if (!checkTime(editSubtitle.end)) {\n                toastr.error(t('endTime'));\n                return false;\n            }\n\n            if (timeToSecond(editSubtitle.start) >= timeToSecond(editSubtitle.end)) {\n                toastr.error(t('greater'));\n                return false;\n            }\n\n            if (subtitles[editIndex - 1] && timeToSecond(editSubtitle.start) < subtitles[editIndex - 1].endTime) {\n                toastr.warning(t('overlaps'));\n            }\n        }\n        return true;\n    }\n\n    onEdit(index) {\n        if (this.checkSubtitle()) {\n            this.setState({\n                editIndex: index,\n                editSubtitle: {\n                    ...this.props.subtitles[index],\n                },\n            });\n            this.props.editSubtitle(index);\n        }\n    }\n\n    onUpdate() {\n        if (this.checkSubtitle()) {\n            const { editIndex, editSubtitle } = this.state;\n            this.props.updateSubtitle(editIndex, {\n                ...editSubtitle,\n            });\n\n            this.setState({\n                editIndex: -1,\n                editSubtitle: {},\n            });\n        }\n    }\n\n    onChange(name, value) {\n        this.setState({\n            editSubtitle: {\n                ...this.state.editSubtitle,\n                [name]: value,\n            },\n        });\n    }\n\n    onRemove(index) {\n        this.props.removeSubtitle(index);\n        this.setState({\n            editIndex: -1,\n            editSubtitle: {},\n        });\n    }\n\n    render() {\n        const { subtitles, mainHeight, mainWidth, currentIndex } = this.props;\n        const { editSubtitle } = this.state;\n        return (\n            <Wrapper>\n                <Table\n                    headerHeight={40}\n                    width={mainWidth / 2}\n                    height={mainHeight}\n                    rowHeight={60}\n                    scrollToIndex={currentIndex}\n                    rowCount={subtitles.length}\n                    rowGetter={({ index }) => subtitles[index]}\n                    headerRowRenderer={() => {\n                        return (\n                            <div className=\"ReactVirtualized__Table__headerRow\">\n                                <div className=\"row\" style={{ width: 50 }} width=\"50\">\n                                    #\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }} width=\"120\">\n                                    <Translate value=\"start\" />\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }} width=\"120\">\n                                    <Translate value=\"end\" />\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }} width=\"100\">\n                                    <Translate value=\"duration\" />\n                                </div>\n                                <div className=\"row\" style={{ flex: 1 }}>\n                                    <Translate value=\"text\" />\n                                </div>\n                                <div className=\"row\" style={{ width: 90 }} width=\"100\">\n                                    <Translate value=\"operation\" />\n                                </div>\n                            </div>\n                        );\n                    }}\n                    rowRenderer={props => {\n                        return (\n                            <div\n                                key={props.key}\n                                className={[\n                                    props.className,\n                                    props.index % 2 ? 'odd' : '',\n                                    props.rowData.editing ? 'editing' : '',\n                                    props.rowData.highlight ? 'highlight' : '',\n                                    props.rowData.overlapping ? 'overlapping' : '',\n                                ]\n                                    .join(' ')\n                                    .trim()}\n                                style={props.style}\n                            >\n                                <div className=\"row\" style={{ width: 50 }}>\n                                    {props.index + 1}\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }}>\n                                    <span className=\"noedit\">{props.rowData.start}</span>\n                                    <input\n                                        maxLength={20}\n                                        className=\"input edit\"\n                                        defaultValue={editSubtitle.start}\n                                        onChange={e => this.onChange('start', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }}>\n                                    <span className=\"noedit\">{props.rowData.end}</span>\n                                    <input\n                                        maxLength={20}\n                                        className=\"input edit\"\n                                        defaultValue={editSubtitle.end}\n                                        onChange={e => this.onChange('end', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }}>\n                                    <span className=\"noedit\">{props.rowData.duration}</span>\n                                    <input\n                                        disabled\n                                        maxLength={20}\n                                        className=\"input edit\"\n                                        defaultValue={editSubtitle.duration}\n                                        onChange={e => this.onChange('duration', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row\" style={{ flex: 1 }}>\n                                    <span className=\"noedit\">\n                                        {props.rowData.text.split(/\\r?\\n/).map((item, index) => (\n                                            <p key={index}>{escapeHTML(item)}</p>\n                                        ))}\n                                    </span>\n                                    <textarea\n                                        maxLength={100}\n                                        className=\"textarea edit\"\n                                        value={unescapeHTML(editSubtitle.text || '')}\n                                        onChange={e => this.onChange('text', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row operation\" style={{ width: 90 }}>\n                                    <i className=\"icon-pencil noedit\" onClick={() => this.onEdit(props.index)}></i>\n                                    <i className=\"icon-ok edit\" onClick={() => this.onUpdate(props.index)}></i>\n                                    <i className=\"icon-trash-empty\" onClick={() => this.onRemove(props.index)}></i>\n                                </div>\n                            </div>\n                        );\n                    }}\n                ></Table>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport dequal from 'dequal';\nimport { escapeHTML } from '../utils';\n\nconst Wrapper = styled.div`\n    position: absolute;\n    z-index: 1;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n`;\n\nconst Inner = styled.div`\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n`;\n\nconst Sub = styled.div`\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    padding: 0 10px;\n    color: #fff;\n    background-color: rgba(255, 255, 255, 0.2);\n    border-left: 1px solid rgba(255, 255, 255, 0.2);\n    border-right: 1px solid rgba(255, 255, 255, 0.2);\n\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.3);\n    }\n\n    &.highlight {\n        background-color: rgba(33, 150, 243, 0.5);\n        border-left: 1px solid rgba(33, 150, 243, 0.5);\n        border-right: 1px solid rgba(33, 150, 243, 0.5);\n    }\n\n    &.overlapping {\n        background-color: #c75123;\n    }\n\n    p {\n        line-height: 1.5;\n        margin: 0;\n    }\n`;\n\nconst SubText = styled.div`\n    position: relative;\n    width: 100%;\n    height: 100%;\n    font-size: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    cursor: move;\n    user-select: none;\n`;\n\nconst Handle = styled.div`\n    position: absolute;\n    top: 0;\n    height: 100%;\n    cursor: col-resize;\n    user-select: none;\n\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.1);\n    }\n`;\n\nfunction findMatchedSubtitles(subtitles, beginTime) {\n    return subtitles.filter(item => {\n        return (\n            (item.startTime >= beginTime && item.startTime <= beginTime + 10) ||\n            (item.endTime >= beginTime && item.endTime <= beginTime + 10)\n        );\n    });\n}\n\nexport default class Blocks extends React.Component {\n    state = {\n        subtitles: [],\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const subtitles = findMatchedSubtitles(props.subtitles, props.beginTime);\n        return dequal(subtitles, state.subtitles)\n            ? null\n            : {\n                  subtitles,\n              };\n    }\n\n    onClick(item) {\n        const { art, highlightSubtitle, updateCurrentIndex } = this.props;\n        if (!art.playing) {\n            highlightSubtitle(item.index);\n            updateCurrentIndex(item.index);\n        }\n    }\n\n    $subs = React.createRef();\n    sub = null;\n    subIsDroging = false;\n    subLeftStart = 0;\n    subLeftDiff = 0;\n\n    subOnMouseDown(item, event) {\n        const isPause = this.props.art.pause;\n        if (!isPause) {\n            this.props.art.pause = true;\n        }\n        this.sub = item;\n        this.subIsDroging = true;\n        this.subLeftStart = event.pageX;\n    }\n\n    subOnMouseMove(item, event) {\n        if (this.subIsDroging && this.sub === item) {\n            const diffLength = event.pageX - this.subLeftStart;\n            const index = this.state.subtitles.indexOf(item);\n            const $sub = this.$subs.current.children[index];\n            $sub.style.transform = `translate(${diffLength}px)`;\n            this.subLeftDiff = diffLength / this.props.grid / 10;\n        }\n    }\n\n    handleOnMouseDown(item, event, type) {\n        //\n    }\n\n    handleOnMouseMove(item, event, type) {\n        //\n    }\n\n    componentDidMount() {\n        document.addEventListener('mouseup', () => {\n            if (this.subIsDroging && this.sub) {\n                const item = this.sub;\n                this.sub = null;\n                this.subIsDroging = false;\n                this.subLeftStart = 0;\n                const index = this.state.subtitles.indexOf(item);\n                const $sub = this.$subs.current.children[index];\n                $sub && ($sub.style.transform = `translate(0)`);\n                item.startTime += this.subLeftDiff;\n                item.endTime += this.subLeftDiff;\n                this.props.updateSubtitle(item.index, item);\n            }\n        });\n    }\n\n    render() {\n        const { padding, grid, beginTime } = this.props;\n        const { subtitles } = this.state;\n        return (\n            <Wrapper\n                style={{\n                    paddingLeft: padding,\n                    paddingRight: padding,\n                }}\n            >\n                <Inner ref={this.$subs}>\n                    {subtitles.map(item => {\n                        return (\n                            <Sub\n                                key={item.index}\n                                onClick={() => this.onClick(item)}\n                                className={[\n                                    item.editing ? 'editing' : '',\n                                    item.highlight ? 'highlight' : '',\n                                    item.overlapping ? 'overlapping' : '',\n                                ]\n                                    .join(' ')\n                                    .trim()}\n                                style={{\n                                    left: (item.startTime - beginTime) * grid * 10,\n                                    width: item.duration * grid * 10,\n                                }}\n                            >\n                                <Handle\n                                    onMouseDown={event => this.handleOnMouseDown(item, event, 'left')}\n                                    onMouseMove={event => this.handleOnMouseMove(item, event, 'left')}\n                                    style={{\n                                        left: 0,\n                                        width: grid,\n                                    }}\n                                />\n                                <SubText\n                                    onMouseDown={event => this.subOnMouseDown(item, event)}\n                                    onMouseMove={event => this.subOnMouseMove(item, event)}\n                                >\n                                    {item.text.split(/\\r?\\n/).map((item, index) => (\n                                        <p key={index}>{escapeHTML(item)}</p>\n                                    ))}\n                                </SubText>\n                                <Handle\n                                    onMouseDown={event => this.handleOnMouseDown(item, event, 'right')}\n                                    onMouseMove={event => this.handleOnMouseMove(item, event, 'right')}\n                                    style={{\n                                        right: 0,\n                                        width: grid,\n                                    }}\n                                />\n                            </Sub>\n                        );\n                    })}\n                </Inner>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport Blocks from './Blocks';\nimport { secondToTime } from '../utils';\n\nconst timelineHeight = 150;\nconst Wrapper = styled.div`\n    position: relative;\n    display: flex;\n    height: ${timelineHeight}px;\n    background-color: rgb(28, 32, 34);\n`;\n\nconst Canvas = styled.canvas`\n    position: absolute;\n    z-index: 2;\n    left: 0;\n    top: 0;\n    pointer-events: none;\n    user-select: none;\n    transition: all 0.2s ease;\n`;\n\nconst Line = styled.div`\n    position: absolute;\n    z-index: 3;\n    left: 0;\n    top: 0;\n    width: 1px;\n    height: 100%;\n    pointer-events: none;\n    user-select: none;\n    background-color: #ff0000;\n`;\n\nfunction drawGrid(ctx, beginTime) {\n    let ruler = 0;\n    const num = 110;\n    const height = ctx.canvas.height;\n    const width = ctx.canvas.width;\n    const gap = width / num;\n\n    ctx.font = '22px Arial';\n    ctx.clearRect(0, 0, width, ctx.canvas.height);\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.05)';\n    ctx.fillRect(0, 0, gap * 5, height);\n    ctx.fillRect(105 * gap, 0, gap * 5, height);\n    for (let index = 0; index < num; index++) {\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.05)';\n        ctx.fillRect(gap * index, 0, 2, height);\n        if (index % 10 === 0) {\n            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\n            if (index) {\n                ctx.fillRect(gap * index, 0, 2, 15);\n            }\n        } else if (index % 5 === 0) {\n            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\n            ctx.fillRect(gap * index, 0, 2, 30);\n            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';\n            ctx.fillText(secondToTime(beginTime + ruler++).split('.')[0], gap * index - 42, 60);\n        }\n    }\n\n    for (let index = 0; index < height / gap; index++) {\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.05)';\n        ctx.fillRect(0, gap * index, width, 2);\n    }\n\n    const grid = Number((gap / 2).toFixed(3));\n    const padding = grid * 5;\n    return {\n        grid,\n        padding,\n        beginTime,\n    };\n}\n\nexport default class Timeline extends React.Component {\n    state = {\n        $canvas: React.createRef(),\n        grid: 0,\n        padding: 0,\n        beginTime: 0,\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const beginTime = Math.floor(props.currentTime / 10) * 10;\n        if (state.$canvas.current) {\n            const $canvas = state.$canvas.current;\n            const ctx = $canvas.getContext('2d');\n\n            if (props.mainWidth * 2 !== $canvas.width) {\n                $canvas.height = timelineHeight * 2;\n                $canvas.width = props.mainWidth * 2;\n                $canvas.style.height = '100%';\n                $canvas.style.width = `${props.mainWidth}px`;\n                return drawGrid(ctx, beginTime);\n            }\n\n            if (state.beginTime !== beginTime) {\n                return drawGrid(ctx, beginTime);\n            }\n        }\n        return null;\n    }\n\n    render() {\n        const { $canvas, grid, padding } = this.state;\n        const { currentTime } = this.props;\n        const lineX = padding + (currentTime % 10) * grid * 10;\n        return (\n            <Wrapper>\n                <Blocks {...this.props} {...this.state} />\n                <Canvas ref={$canvas} />\n                <Line\n                    style={{\n                        transform: `translate(${lineX}px)`,\n                    }}\n                ></Line>\n            </Wrapper>\n        );\n    }\n}\n","export default {\n    // http://api.fanyi.baidu.com/api/trans/product/apidoc\n    baidu: {\n        zh: [\n            { name: '简体中文', key: 'zh' },\n            { name: '繁体中文', key: 'cht' },\n            { name: '英语', key: 'en' },\n            { name: '粤语', key: 'yue' },\n            { name: '文言文', key: 'wyw' },\n            { name: '日语', key: 'jp' },\n            { name: '韩语', key: 'kor' },\n            { name: '法语', key: 'fra' },\n            { name: '西班牙语', key: 'spa' },\n            { name: '泰语', key: 'th' },\n            { name: '阿拉伯语', key: 'ara' },\n            { name: '俄语', key: 'ru' },\n            { name: '葡萄牙语', key: 'pt' },\n            { name: '德语', key: 'de' },\n            { name: '意大利语', key: 'it' },\n            { name: '希腊语', key: 'el' },\n            { name: '荷兰语', key: 'nl' },\n            { name: '波兰语', key: 'pl' },\n            { name: '保加利亚语', key: 'bul' },\n            { name: '爱沙尼亚语', key: 'est' },\n            { name: '丹麦语', key: 'dan' },\n            { name: '芬兰语', key: 'fin' },\n            { name: '捷克语', key: 'cs' },\n            { name: '罗马尼亚语', key: 'rom' },\n            { name: '斯洛文尼亚语', key: 'slo' },\n            { name: '瑞典语', key: 'swe' },\n            { name: '匈牙利语', key: 'hu' },\n            { name: '越南语', key: 'vie' },\n        ],\n        en: [\n            { name: 'Chinese Simplified', key: 'zh' },\n            { name: 'Chinese Traditional', key: 'cht' },\n            { name: 'English', key: 'en' },\n            { name: 'Cantonese', key: 'yue' },\n            { name: 'Classical Chinese', key: 'wyw' },\n            { name: 'Japanese', key: 'jp' },\n            { name: 'Korean', key: 'kor' },\n            { name: 'French', key: 'fra' },\n            { name: 'Spanish', key: 'spa' },\n            { name: 'Thai', key: 'th' },\n            { name: 'Arabic', key: 'ara' },\n            { name: 'Russian', key: 'ru' },\n            { name: 'Portuguese', key: 'pt' },\n            { name: 'German', key: 'de' },\n            { name: 'Italian', key: 'it' },\n            { name: 'Greek', key: 'el' },\n            { name: 'Dutch', key: 'nl' },\n            { name: 'Polish', key: 'pl' },\n            { name: 'Bulgarian', key: 'bul' },\n            { name: 'Estonian', key: 'est' },\n            { name: 'Danish', key: 'dan' },\n            { name: 'Finnish', key: 'fin' },\n            { name: 'Czech', key: 'cs' },\n            { name: 'Romanian', key: 'rom' },\n            { name: 'Slovenian', key: 'slo' },\n            { name: 'Swedish', key: 'swe' },\n            { name: 'Hungarian', key: 'hu' },\n            { name: 'Vietnamese', key: 'vie' },\n        ],\n    },\n\n    // https://cloud.google.com/translate/docs/languages\n    google: {\n        zh: [\n            { name: '简体中文', key: 'zh' },\n            { name: '繁体中文', key: 'zh-TW' },\n            { name: '英语', key: 'en' },\n            { name: '南非荷兰语', key: 'af' },\n            { name: '阿尔巴尼亚语', key: 'sq' },\n            { name: '阿姆哈拉语', key: 'am' },\n            { name: '阿拉伯语', key: 'ar' },\n            { name: '亚美尼亚语', key: 'hy' },\n            { name: '阿塞拜疆语', key: 'az' },\n            { name: '巴斯克语', key: 'eu' },\n            { name: '白俄罗斯语', key: 'be' },\n            { name: '孟加拉语', key: 'bn' },\n            { name: '波斯尼亚语', key: 'bs' },\n            { name: '保加利亚语', key: 'bg' },\n            { name: '加泰罗尼亚语', key: 'ca' },\n            { name: '宿务语', key: 'ceb' },\n            { name: '科西嘉语', key: 'co' },\n            { name: '克罗地亚语', key: 'hr' },\n            { name: '捷克语', key: 'cs' },\n            { name: '丹麦语', key: 'da' },\n            { name: '荷兰语', key: 'nl' },\n            { name: '世界语', key: 'eo' },\n            { name: '爱沙尼亚语', key: 'et' },\n            { name: '芬兰语', key: 'fi' },\n            { name: '法语', key: 'fr' },\n            { name: '弗里斯兰语', key: 'fy' },\n            { name: '加利西亚语', key: 'gl' },\n            { name: '格鲁吉亚语', key: 'ka' },\n            { name: '德语', key: 'de' },\n            { name: '希腊语', key: 'el' },\n            { name: '古吉拉特语', key: 'gu' },\n            { name: '海地克里奥尔语', key: 'ht' },\n            { name: '豪萨语', key: 'ha' },\n            { name: '夏威夷语', key: 'haw' },\n            { name: '希伯来语', key: 'he' },\n            { name: '印地语', key: 'hi' },\n            { name: '苗语', key: 'hmn' },\n            { name: '匈牙利语', key: 'hu' },\n            { name: '冰岛语', key: 'is' },\n            { name: '伊博语', key: 'ig' },\n            { name: '印度尼西亚语', key: 'id' },\n            { name: '爱尔兰语', key: 'ga' },\n            { name: '意大利语', key: 'it' },\n            { name: '日语', key: 'ja' },\n            { name: '爪哇语', key: 'jw' },\n            { name: '卡纳达语', key: 'kn' },\n            { name: '哈萨克语', key: 'kk' },\n            { name: '高棉文', key: 'km' },\n            { name: '韩语', key: 'ko' },\n            { name: '库尔德语', key: 'ku' },\n            { name: '吉尔吉斯语', key: 'ky' },\n            { name: '老挝语', key: 'lo' },\n            { name: '拉丁文', key: 'la' },\n            { name: '拉脱维亚语', key: 'lv' },\n            { name: '立陶宛语', key: 'lt' },\n            { name: '卢森堡语', key: 'lb' },\n            { name: '马其顿语', key: 'mk' },\n            { name: '马尔加什语', key: 'mg' },\n            { name: '马来语', key: 'ms' },\n            { name: '马拉雅拉姆文', key: 'ml' },\n            { name: '马耳他语', key: 'mt' },\n            { name: '毛利语', key: 'mi' },\n            { name: '马拉地语', key: 'mr' },\n            { name: '蒙古文', key: 'mn' },\n            { name: '缅甸语', key: 'my' },\n            { name: '尼泊尔语', key: 'ne' },\n            { name: '挪威语', key: 'no' },\n            { name: '尼杨扎语', key: 'ny' },\n            { name: '普什图语', key: 'ps' },\n            { name: '波斯语', key: 'fa' },\n            { name: '波兰语', key: 'pl' },\n            { name: '葡萄牙语', key: 'pt' },\n            { name: '旁遮普语', key: 'pa' },\n            { name: '罗马尼亚语', key: 'ro' },\n            { name: '俄语', key: 'ru' },\n            { name: '萨摩亚语', key: 'sm' },\n            { name: '苏格兰盖尔语', key: 'gd' },\n            { name: '塞尔维亚语', key: 'sr' },\n            { name: '塞索托语', key: 'st' },\n            { name: '修纳语', key: 'sn' },\n            { name: '信德语', key: 'sd' },\n            { name: '僧伽罗语', key: 'si' },\n            { name: '斯洛伐克语', key: 'sk' },\n            { name: '斯洛文尼亚语', key: 'sl' },\n            { name: '索马里语', key: 'so' },\n            { name: '西班牙语', key: 'es' },\n            { name: '巽他语', key: 'su' },\n            { name: '斯瓦希里语', key: 'sw' },\n            { name: '瑞典语', key: 'sv' },\n            { name: '塔加路语', key: 'tl' },\n            { name: '塔吉克语', key: 'tg' },\n            { name: '泰米尔语', key: 'ta' },\n            { name: '泰卢固语', key: 'te' },\n            { name: '泰文', key: 'th' },\n            { name: '土耳其语', key: 'tr' },\n            { name: '乌克兰语', key: 'uk' },\n            { name: '乌尔都语', key: 'ur' },\n            { name: '乌兹别克语', key: 'uz' },\n            { name: '越南语', key: 'vi' },\n            { name: '威尔士语', key: 'cy' },\n            { name: '班图语', key: 'xh' },\n            { name: '意第绪语', key: 'yi' },\n            { name: '约鲁巴语', key: 'yo' },\n            { name: '祖鲁语', key: 'zu' },\n        ],\n        en: [\n            { name: 'Chinese Simplified', key: 'zh' },\n            { name: 'Chinese Traditional', key: 'zh-TW' },\n            { name: 'English', key: 'en' },\n            { name: 'Afrikaans', key: 'af' },\n            { name: 'Albania', key: 'sq' },\n            { name: 'Amharic', key: 'am' },\n            { name: 'Arabic', key: 'ar' },\n            { name: 'Armenian', key: 'hy' },\n            { name: 'Azerbaijani', key: 'az' },\n            { name: 'Basque', key: 'eu' },\n            { name: 'Belarusian', key: 'be' },\n            { name: 'Bengali', key: 'bn' },\n            { name: 'Bosnia', key: 'bs' },\n            { name: 'Bulgarian', key: 'bg' },\n            { name: 'Catalan', key: 'ca' },\n            { name: 'Cebu language', key: 'ceb' },\n            { name: 'Corsican', key: 'co' },\n            { name: 'Croatian', key: 'hr' },\n            { name: 'Czech', key: 'cs' },\n            { name: 'Danish', key: 'da' },\n            { name: 'Dutch', key: 'nl' },\n            { name: 'Esperanto', key: 'eo' },\n            { name: 'Estonian', key: 'et' },\n            { name: 'Finnish', key: 'fi' },\n            { name: 'French', key: 'fr' },\n            { name: 'Friesian', key: 'fy' },\n            { name: 'Galician', key: 'gl' },\n            { name: 'Georgian', key: 'ka' },\n            { name: 'German', key: 'de' },\n            { name: 'Greek', key: 'el' },\n            { name: 'Gujarati', key: 'gu' },\n            { name: 'Haiti Creole', key: 'ht' },\n            { name: 'Hausa', key: 'ha' },\n            { name: 'Hawaiian', key: 'haw' },\n            { name: 'Hebrew', key: 'he' },\n            { name: 'Hindi', key: 'hi' },\n            { name: 'Hmong', key: 'hmn' },\n            { name: 'Hungarian', key: 'hu' },\n            { name: 'Icelandic', key: 'is' },\n            { name: 'Ibo', key: 'ig' },\n            { name: 'Indonesian', key: 'id' },\n            { name: 'Irish', key: 'ga' },\n            { name: 'Italian', key: 'it' },\n            { name: 'Japanese', key: 'ja' },\n            { name: 'Javanese', key: 'jw' },\n            { name: 'Kannada', key: 'kn' },\n            { name: 'Kazakh', key: 'kk' },\n            { name: 'Khmer text', key: 'km' },\n            { name: 'Korean', key: 'ko' },\n            { name: 'Kurdish', key: 'ku' },\n            { name: 'Kyrgyz', key: 'ky' },\n            { name: 'Laotian', key: 'lo' },\n            { name: 'Latin', key: 'la' },\n            { name: 'Latvian', key: 'lv' },\n            { name: 'Lithuania', key: 'lt' },\n            { name: 'Luxembourg', key: 'lb' },\n            { name: 'Macedonian', key: 'mk' },\n            { name: 'Malagasy', key: 'mg' },\n            { name: 'Malay', key: 'ms' },\n            { name: 'Malayalam', key: 'ml' },\n            { name: 'Malta', key: 'mt' },\n            { name: 'Maori', key: 'mi' },\n            { name: 'Marathi', key: 'mr' },\n            { name: 'Mongolian', key: 'mn' },\n            { name: 'Burmese', key: 'my' },\n            { name: 'Nepalese', key: 'ne' },\n            { name: 'Norwegian', key: 'no' },\n            { name: 'Nyanza', key: 'ny' },\n            { name: 'Pashto', key: 'ps' },\n            { name: 'Persian', key: 'fa' },\n            { name: 'Polish', key: 'pl' },\n            { name: 'Portuguese', key: 'pt' },\n            { name: 'Punjabi', key: 'pa' },\n            { name: 'Romanian', key: 'ro' },\n            { name: 'Russian', key: 'ru' },\n            { name: 'Samoan', key: 'sm' },\n            { name: 'Scottish Gaelic', key: 'gd' },\n            { name: 'Serbian', key: 'sr' },\n            { name: 'Sesotho', key: 'st' },\n            { name: 'Shanna', key: 'sn' },\n            { name: 'Sin German', key: 'sd' },\n            { name: 'Sinhala', key: 'si' },\n            { name: 'Slovakian', key: 'sk' },\n            { name: 'Slovenian', key: 'sl' },\n            { name: 'Somali', key: 'so' },\n            { name: 'Spanish', key: 'es' },\n            { name: 'Sundanese', key: 'su' },\n            { name: 'Swahili', key: 'sw' },\n            { name: 'Swedish', key: 'sv' },\n            { name: 'Tagalogian', key: 'tl' },\n            { name: 'Tajik', key: 'tg' },\n            { name: 'Tamil', key: 'ta' },\n            { name: 'Telugu', key: 'te' },\n            { name: 'Thai', key: 'th' },\n            { name: 'Turkish', key: 'tr' },\n            { name: 'Ukrainian', key: 'uk' },\n            { name: 'Urdu', key: 'ur' },\n            { name: 'Uzbek', key: 'uz' },\n            { name: 'Vietnamese', key: 'vi' },\n            { name: 'Welsh', key: 'cy' },\n            { name: 'bantu', key: 'xh' },\n            { name: 'Yiddish', key: 'yi' },\n            { name: 'Yoruba', key: 'yo' },\n            { name: 'zulu', key: 'zu' },\n        ],\n    },\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Translate } from 'react-i18nify';\nimport languages from '../utils/languages';\n\nconst Wrapper = styled.div`\n    flex: 1;\n    padding: 10px;\n`;\n\nconst Button = styled.button`\n    height: 25px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    cursor: pointer;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n`;\n\nconst Select = styled.select`\n    height: 25px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n`;\n\nexport default class Player extends React.Component {\n    state = {\n        lang: 'zh',\n        translator: 'google',\n        translators: {\n            zh: [\n                {\n                    name: '谷歌翻译',\n                    key: 'google',\n                },\n                {\n                    name: '百度翻译',\n                    key: 'baidu',\n                },\n            ],\n            en: [\n                {\n                    name: 'Google Translate',\n                    key: 'google',\n                },\n                {\n                    name: 'Baidu Translate',\n                    key: 'baidu',\n                },\n            ],\n        },\n        languages,\n    };\n\n    render() {\n        return (\n            <Wrapper>\n                <Button onClick={() => this.props.updateSubtitle(this.props.subtitles.length)}>\n                    <i className=\"icon-doc-new\"></i>\n                    <Translate value=\"btnAddSubtitle\" />\n                </Button>\n                <Button onClick={() => this.props.timeOffset(-0.1)}>\n                    <i className=\"icon-minus\"></i>\n                    <Translate value=\"btnTimeOffsetMinus\" />\n                </Button>\n                <Button onClick={() => this.props.timeOffset(0.1)}>\n                    <i className=\"icon-plus\"></i>\n                    <Translate value=\"btnTimeOffsetPlus\" />\n                </Button>\n                <Button onClick={() => this.props.undoSubtitle()}>\n                    <i className=\"icon-ccw\"></i>\n                    <Translate value=\"btnUndo\" />\n                </Button>\n                <div />\n                <Button onClick={this.props.removeAllSubtitle}>\n                    <i className=\"icon-trash-empty\"></i>\n                    <Translate value=\"btnRemoveAll\" />\n                </Button>\n                <Button onClick={this.props.removeEmptySubtitle}>\n                    <i className=\"icon-trash-empty\"></i>\n                    <Translate value=\"btnRemoveEmpty\" />\n                </Button>\n                <Button onClick={this.props.removeCache}>\n                    <i className=\"icon-trash-empty\"></i>\n                    <Translate value=\"btnRemoveCache\" />\n                </Button>\n                <div />\n                <Button onClick={() => this.props.translate(this.state.lang, this.state.translator)}>\n                    <i className=\"icon-language\"></i>\n                    <Translate value=\"btnBatchTranslate\" />\n                </Button>\n                <span\n                    style={{\n                        marginRight: 10,\n                    }}\n                >\n                    <Translate value=\"use\" />\n                </span>\n                <Select\n                    value={this.state.translator}\n                    onChange={event => {\n                        this.setState({ translator: event.target.value });\n                    }}\n                >\n                    {this.state.translators[this.props.lang].map(item => (\n                        <option key={item.key} value={item.key}>\n                            {item.name}\n                        </option>\n                    ))}\n                </Select>\n                <span\n                    style={{\n                        marginRight: 10,\n                    }}\n                >\n                    <Translate value=\"to\" />\n                </span>\n                <Select\n                    value={this.state.lang}\n                    onChange={event => {\n                        this.setState({ lang: event.target.value });\n                    }}\n                >\n                    {this.state.languages[this.state.translator][this.props.lang].map(item => (\n                        <option key={item.key} value={item.key}>\n                            {item.name}\n                        </option>\n                    ))}\n                </Select>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport ArtplayerComponent from 'artplayer-react';\nimport { t } from 'react-i18nify';\nimport Toolset from './Toolset';\nimport toastr from 'toastr';\n\nconst Wrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n`;\n\nconst VideoBox = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 70%;\n    padding: 10px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n\n    .artplayer-video-player .artplayer-subtitle p {\n        background-color: rgba(0, 0, 0, 0.5);\n    }\n`;\n\nexport default class Player extends React.Component {\n    state = {\n        art: null,\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        if (state.art) {\n            const videoUrl = state.art.template.$video.src;\n            const subtitleUrl = state.art.template.$track.src;\n            const currentTime = state.art.currentTime;\n            if (props.videoUrl !== videoUrl) {\n                state.art.player.switchUrl(props.videoUrl);\n                URL.revokeObjectURL(videoUrl);\n            }\n            if (props.subtitleUrl !== subtitleUrl) {\n                state.art.subtitle.init(props.subtitleUrl);\n                URL.revokeObjectURL(subtitleUrl);\n            }\n            if (!state.art.playing && props.setTime > 0 && props.setTime !== currentTime) {\n                if (props.setTime <= state.art.duration) {\n                    state.art.currentTime = props.setTime;\n                    props.updateCurrentTime(state.art.currentTime);\n                } else {\n                    toastr.warning(t('durationLimit'));\n                }\n            }\n        }\n        return null;\n    }\n\n    render() {\n        const { videoUrl, subtitleUrl, updateCurrentTime, getArt } = this.props;\n        return (\n            <Wrapper>\n                <VideoBox>\n                    {videoUrl ? (\n                        <ArtplayerComponent\n                            style={{\n                                width: '100%',\n                                height: '100%',\n                            }}\n                            option={{\n                                url: videoUrl,\n                                loop: true,\n                                lang: 'en',\n                                autoSize: true,\n                                subtitle: {\n                                    url: subtitleUrl,\n                                },\n                            }}\n                            getInstance={art => {\n                                (function loop() {\n                                    window.requestAnimationFrame(() => {\n                                        if (art.playing) {\n                                            updateCurrentTime(art.currentTime);\n                                        }\n                                        loop();\n                                    });\n                                })();\n\n                                art.once('video:canplay', () => {\n                                    art.player.currentTime = 1;\n                                    updateCurrentTime(art.currentTime);\n                                });\n\n                                art.on('seek', () => {\n                                    updateCurrentTime(art.currentTime);\n                                });\n\n                                this.setState({\n                                    art,\n                                });\n\n                                getArt(art);\n                            }}\n                        />\n                    ) : null}\n                </VideoBox>\n                <Toolset {...this.props} />\n            </Wrapper>\n        );\n    }\n}\n","import fetchJsonp from 'fetch-jsonp';\nimport NProgress from 'nprogress';\nimport toastr from 'toastr';\nimport pLimit from 'p-limit';\nimport MD5 from './md5';\nimport { sleep } from './index';\n\nexport function baiduTranslate(query, land) {\n    return new Promise(resolve => {\n        const appid = '20190926000337502';\n        const key = 'AyDT0yVJk43C8mgzspBY';\n        const salt = Date.now();\n\n        const url = new URL('https://fanyi-api.baidu.com/api/trans/vip/translate');\n        url.searchParams.append('q', query);\n        url.searchParams.append('appid', appid);\n        url.searchParams.append('salt', salt);\n        url.searchParams.append('from', 'auto');\n        url.searchParams.append('to', land);\n        url.searchParams.append('sign', MD5(appid + query + salt + key));\n\n        sleep().then(async () => {\n            try {\n                const data = await fetchJsonp(url.href);\n                const result = await data.json();\n                if (result.error_code) {\n                    toastr.error(result.error_msg);\n                    resolve('');\n                } else if (result.trans_result) {\n                    resolve(\n                        result.trans_result\n                            .map(item => item.dst)\n                            .join('\\n')\n                            .trim(),\n                    );\n                } else {\n                    resolve('');\n                }\n            } catch (error) {\n                toastr.error(error.message);\n                resolve('');\n            }\n        });\n    });\n}\n\nexport function googleTranslate(query, land) {\n    const url = new URL('https://translate.googleapis.com/translate_a/single');\n    url.searchParams.append('client', 'gtx');\n    url.searchParams.append('sl', 'auto');\n    url.searchParams.append('dt', 't');\n    url.searchParams.append('tl', land);\n    url.searchParams.append('q', query);\n\n    return new Promise(resolve => {\n        sleep().then(async () => {\n            fetch(url.href)\n                .then(data => data.json())\n                .then(data => {\n                    if (data) {\n                        resolve(data[0].map(item => item[0].trim()).join('\\n'));\n                    } else {\n                        resolve('');\n                    }\n                })\n                .catch(error => {\n                    toastr.error(error.message);\n                    resolve('');\n                });\n        });\n    });\n}\n\nexport default async function translate(subtitles, land, translatorName = 'google') {\n    NProgress.start();\n    const limit = pLimit(1);\n    let index = 0;\n\n    const translator = {\n        baidu: baiduTranslate,\n        google: googleTranslate,\n    }[translatorName];\n\n    try {\n        const result = await Promise.all(\n            subtitles.map(item =>\n                limit(async () => {\n                    const data = await translator(item.text, land);\n                    NProgress.set(++index / subtitles.length);\n                    if (data) {\n                        item.text = data;\n                    }\n                    return item;\n                }),\n            ),\n        );\n        NProgress.done();\n        return result;\n    } catch (error) {\n        NProgress.done();\n        toastr.error(error.message);\n    }\n}\n","export default function MD5(string) {\n    function RotateLeft(lValue, iShiftBits) {\n        return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));\n    }\n\n    function AddUnsigned(lX, lY) {\n        var lX4, lY4, lX8, lY8, lResult;\n        lX8 = lX & 0x80000000;\n        lY8 = lY & 0x80000000;\n        lX4 = lX & 0x40000000;\n        lY4 = lY & 0x40000000;\n        lResult = (lX & 0x3fffffff) + (lY & 0x3fffffff);\n        if (lX4 & lY4) {\n            return lResult ^ 0x80000000 ^ lX8 ^ lY8;\n        }\n        if (lX4 | lY4) {\n            if (lResult & 0x40000000) {\n                return lResult ^ 0xc0000000 ^ lX8 ^ lY8;\n            } else {\n                return lResult ^ 0x40000000 ^ lX8 ^ lY8;\n            }\n        } else {\n            return lResult ^ lX8 ^ lY8;\n        }\n    }\n\n    function F(x, y, z) {\n        return (x & y) | (~x & z);\n    }\n    function G(x, y, z) {\n        return (x & z) | (y & ~z);\n    }\n    function H(x, y, z) {\n        return x ^ y ^ z;\n    }\n    function I(x, y, z) {\n        return y ^ (x | ~z);\n    }\n\n    function FF(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function GG(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function HH(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function II(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function ConvertToWordArray(string) {\n        var lWordCount;\n        var lMessageLength = string.length;\n        var lNumberOfWords_temp1 = lMessageLength + 8;\n        var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64;\n        var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n        var lWordArray = Array(lNumberOfWords - 1);\n        var lBytePosition = 0;\n        var lByteCount = 0;\n        while (lByteCount < lMessageLength) {\n            lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n            lBytePosition = (lByteCount % 4) * 8;\n            lWordArray[lWordCount] = lWordArray[lWordCount] | (string.charCodeAt(lByteCount) << lBytePosition);\n            lByteCount++;\n        }\n        lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n        lBytePosition = (lByteCount % 4) * 8;\n        lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);\n        lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n        lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n        return lWordArray;\n    }\n\n    function WordToHex(lValue) {\n        var WordToHexValue = '',\n            WordToHexValue_temp = '',\n            lByte,\n            lCount;\n        for (lCount = 0; lCount <= 3; lCount++) {\n            lByte = (lValue >>> (lCount * 8)) & 255;\n            WordToHexValue_temp = '0' + lByte.toString(16);\n            WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);\n        }\n        return WordToHexValue;\n    }\n\n    function Utf8Encode(string) {\n        string = string.replace(/\\r\\n/g, '\\n');\n        var utftext = '';\n\n        for (var n = 0; n < string.length; n++) {\n            var c = string.charCodeAt(n);\n\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            } else if (c > 127 && c < 2048) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            } else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n        }\n\n        return utftext;\n    }\n\n    var x = [];\n    var k, AA, BB, CC, DD, a, b, c, d;\n    var S11 = 7,\n        S12 = 12,\n        S13 = 17,\n        S14 = 22;\n    var S21 = 5,\n        S22 = 9,\n        S23 = 14,\n        S24 = 20;\n    var S31 = 4,\n        S32 = 11,\n        S33 = 16,\n        S34 = 23;\n    var S41 = 6,\n        S42 = 10,\n        S43 = 15,\n        S44 = 21;\n\n    string = Utf8Encode(string);\n\n    x = ConvertToWordArray(string);\n\n    a = 0x67452301;\n    b = 0xefcdab89;\n    c = 0x98badcfe;\n    d = 0x10325476;\n\n    for (k = 0; k < x.length; k += 16) {\n        AA = a;\n        BB = b;\n        CC = c;\n        DD = d;\n        a = FF(a, b, c, d, x[k + 0], S11, 0xd76aa478);\n        d = FF(d, a, b, c, x[k + 1], S12, 0xe8c7b756);\n        c = FF(c, d, a, b, x[k + 2], S13, 0x242070db);\n        b = FF(b, c, d, a, x[k + 3], S14, 0xc1bdceee);\n        a = FF(a, b, c, d, x[k + 4], S11, 0xf57c0faf);\n        d = FF(d, a, b, c, x[k + 5], S12, 0x4787c62a);\n        c = FF(c, d, a, b, x[k + 6], S13, 0xa8304613);\n        b = FF(b, c, d, a, x[k + 7], S14, 0xfd469501);\n        a = FF(a, b, c, d, x[k + 8], S11, 0x698098d8);\n        d = FF(d, a, b, c, x[k + 9], S12, 0x8b44f7af);\n        c = FF(c, d, a, b, x[k + 10], S13, 0xffff5bb1);\n        b = FF(b, c, d, a, x[k + 11], S14, 0x895cd7be);\n        a = FF(a, b, c, d, x[k + 12], S11, 0x6b901122);\n        d = FF(d, a, b, c, x[k + 13], S12, 0xfd987193);\n        c = FF(c, d, a, b, x[k + 14], S13, 0xa679438e);\n        b = FF(b, c, d, a, x[k + 15], S14, 0x49b40821);\n        a = GG(a, b, c, d, x[k + 1], S21, 0xf61e2562);\n        d = GG(d, a, b, c, x[k + 6], S22, 0xc040b340);\n        c = GG(c, d, a, b, x[k + 11], S23, 0x265e5a51);\n        b = GG(b, c, d, a, x[k + 0], S24, 0xe9b6c7aa);\n        a = GG(a, b, c, d, x[k + 5], S21, 0xd62f105d);\n        d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);\n        c = GG(c, d, a, b, x[k + 15], S23, 0xd8a1e681);\n        b = GG(b, c, d, a, x[k + 4], S24, 0xe7d3fbc8);\n        a = GG(a, b, c, d, x[k + 9], S21, 0x21e1cde6);\n        d = GG(d, a, b, c, x[k + 14], S22, 0xc33707d6);\n        c = GG(c, d, a, b, x[k + 3], S23, 0xf4d50d87);\n        b = GG(b, c, d, a, x[k + 8], S24, 0x455a14ed);\n        a = GG(a, b, c, d, x[k + 13], S21, 0xa9e3e905);\n        d = GG(d, a, b, c, x[k + 2], S22, 0xfcefa3f8);\n        c = GG(c, d, a, b, x[k + 7], S23, 0x676f02d9);\n        b = GG(b, c, d, a, x[k + 12], S24, 0x8d2a4c8a);\n        a = HH(a, b, c, d, x[k + 5], S31, 0xfffa3942);\n        d = HH(d, a, b, c, x[k + 8], S32, 0x8771f681);\n        c = HH(c, d, a, b, x[k + 11], S33, 0x6d9d6122);\n        b = HH(b, c, d, a, x[k + 14], S34, 0xfde5380c);\n        a = HH(a, b, c, d, x[k + 1], S31, 0xa4beea44);\n        d = HH(d, a, b, c, x[k + 4], S32, 0x4bdecfa9);\n        c = HH(c, d, a, b, x[k + 7], S33, 0xf6bb4b60);\n        b = HH(b, c, d, a, x[k + 10], S34, 0xbebfbc70);\n        a = HH(a, b, c, d, x[k + 13], S31, 0x289b7ec6);\n        d = HH(d, a, b, c, x[k + 0], S32, 0xeaa127fa);\n        c = HH(c, d, a, b, x[k + 3], S33, 0xd4ef3085);\n        b = HH(b, c, d, a, x[k + 6], S34, 0x4881d05);\n        a = HH(a, b, c, d, x[k + 9], S31, 0xd9d4d039);\n        d = HH(d, a, b, c, x[k + 12], S32, 0xe6db99e5);\n        c = HH(c, d, a, b, x[k + 15], S33, 0x1fa27cf8);\n        b = HH(b, c, d, a, x[k + 2], S34, 0xc4ac5665);\n        a = II(a, b, c, d, x[k + 0], S41, 0xf4292244);\n        d = II(d, a, b, c, x[k + 7], S42, 0x432aff97);\n        c = II(c, d, a, b, x[k + 14], S43, 0xab9423a7);\n        b = II(b, c, d, a, x[k + 5], S44, 0xfc93a039);\n        a = II(a, b, c, d, x[k + 12], S41, 0x655b59c3);\n        d = II(d, a, b, c, x[k + 3], S42, 0x8f0ccc92);\n        c = II(c, d, a, b, x[k + 10], S43, 0xffeff47d);\n        b = II(b, c, d, a, x[k + 1], S44, 0x85845dd1);\n        a = II(a, b, c, d, x[k + 8], S41, 0x6fa87e4f);\n        d = II(d, a, b, c, x[k + 15], S42, 0xfe2ce6e0);\n        c = II(c, d, a, b, x[k + 6], S43, 0xa3014314);\n        b = II(b, c, d, a, x[k + 13], S44, 0x4e0811a1);\n        a = II(a, b, c, d, x[k + 4], S41, 0xf7537e82);\n        d = II(d, a, b, c, x[k + 11], S42, 0xbd3af235);\n        c = II(c, d, a, b, x[k + 2], S43, 0x2ad7d2bb);\n        b = II(b, c, d, a, x[k + 9], S44, 0xeb86d391);\n        a = AddUnsigned(a, AA);\n        b = AddUnsigned(b, BB);\n        c = AddUnsigned(c, CC);\n        d = AddUnsigned(d, DD);\n    }\n\n    var temp = WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);\n\n    return temp.toLowerCase();\n}\n","export default class Storage {\n    constructor() {\n        this.name = 'subplayer_settings';\n    }\n\n    get(key) {\n        const storage = JSON.parse(window.localStorage.getItem(this.name)) || {};\n        return key ? storage[key] : storage;\n    }\n\n    set(key, value) {\n        const storage = Object.assign({}, this.get(), {\n            [key]: value,\n        });\n        window.localStorage.setItem(this.name, JSON.stringify(storage));\n    }\n\n    del(key) {\n        const storage = this.get();\n        delete storage[key];\n        window.localStorage.setItem(this.name, JSON.stringify(storage));\n    }\n\n    clean() {\n        window.localStorage.removeItem(this.name);\n    }\n}\n","import React from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport { t, setLocale } from 'react-i18nify';\nimport toastr from 'toastr';\nimport Header from './Header';\nimport Subtitle from './Subtitle';\nimport Timeline from './Timeline';\nimport Player from './Player';\nimport translate from '../utils/translate';\nimport Storage from '../utils/storage';\nimport {\n    debounce,\n    arrToVtt,\n    vttToUrl,\n    readSubtitleFromUrl,\n    urlToArr,\n    timeToSecond,\n    downloadFile,\n    secondToTime,\n    clamp,\n} from '../utils';\n\nconst GlobalStyle = createGlobalStyle`\n    html,\n    body,\n    #root {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;\n        line-height: 1.5;\n        height: 100%;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: rgb(16, 17, 19);\n    }\n\n    #toast-container.toast-top-right {\n        top: 60px;\n\n        & > div {\n            box-shadow: none;\n        }\n    }\n\n    #nprogress .bar {\n        top: 50px !important;\n\n        .peg {\n            display: none !important;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n`;\n\nconst Main = styled.div`\n    position: relative;\n    display: flex;\n    flex: 1;\n`;\n\nlet defaultVideoUrl = 'https://zhw2590582.github.io/assets-cdn/video/fullmetal-alchemist-again.mp4';\nlet defaultSubtitleUrl = 'https://zhw2590582.github.io/assets-cdn/subtitle/fullmetal-alchemist-again.vtt';\n\nexport default class App extends React.Component {\n    storage = new Storage();\n    inTranslation = false;\n    history = [];\n\n    state = {\n        art: null,\n        lang: 'en',\n        mainHeight: 100,\n        mainWidth: 100,\n        videoUrl: '',\n        subtitleUrl: '',\n        currentTime: 0,\n        setTime: -1,\n        currentIndex: -1,\n        subtitles: [],\n    };\n\n    componentDidMount() {\n        this.setLocale(this.storage.get('lang') || 'en');\n\n        const uddateMainSize = () => {\n            this.setState({\n                mainHeight: document.body.clientHeight - 200,\n                mainWidth: document.body.clientWidth,\n            });\n        };\n\n        const resizeDebounce = debounce(() => {\n            uddateMainSize();\n        }, 500);\n\n        uddateMainSize();\n        window.addEventListener('resize', resizeDebounce);\n\n        const locationUrl = new URL(window.location.href);\n        const locationSubtitleUrl =\n            decodeURIComponent(locationUrl.searchParams.get('subtitle') || '') || defaultSubtitleUrl;\n        const locationVideoUrl = decodeURIComponent(locationUrl.searchParams.get('video') || '') || defaultVideoUrl;\n\n        const storageSubtitles = this.storage.get('subtitles');\n        if (storageSubtitles) {\n            const subtitleUrl = vttToUrl(arrToVtt(storageSubtitles));\n            urlToArr(subtitleUrl).then(subtitles => {\n                this.updateSubtitles(subtitles, true).then(() => {\n                    this.updateVideoUrl(locationVideoUrl);\n                });\n            });\n        } else {\n            readSubtitleFromUrl(locationSubtitleUrl)\n                .then(data => {\n                    const subtitleUrl = vttToUrl(data);\n                    urlToArr(subtitleUrl).then(subtitles => {\n                        this.updateSubtitles(subtitles, true).then(() => {\n                            this.updateVideoUrl(locationVideoUrl);\n                        });\n                    });\n                })\n                .catch(error => {\n                    toastr.error(error.message);\n                    throw error;\n                });\n        }\n    }\n\n    // 验证index在字幕数组范围内\n    checkIndex(index) {\n        return index >= 0 && index <= this.state.subtitles.length - 1;\n    }\n\n    // 获取播放器\n    getArt(art) {\n        this.setState({\n            art,\n        });\n    }\n\n    // 删除单个字幕\n    removeSubtitle(index) {\n        if (!this.checkIndex(index)) return;\n        const subtitles = this.state.subtitles;\n        subtitles.splice(index, 1);\n        this.updateSubtitles(subtitles, true).then(() => {\n            toastr.success(t('delete'));\n        });\n    }\n\n    // 激活单个字幕的编辑\n    editSubtitle(index) {\n        if (!this.checkIndex(index)) return;\n        const subtitles = this.state.subtitles.map(item => {\n            item.highlight = false;\n            item.editing = false;\n            return item;\n        });\n        subtitles[index].editing = true;\n        this.updateSubtitles(subtitles);\n        this.setState({\n            setTime: subtitles[index].startTime + 0.001,\n        });\n    }\n\n    // 激活单个字幕的高亮\n    highlightSubtitle(index) {\n        if (!this.checkIndex(index)) return;\n        const subtitles = this.state.subtitles.map(item => {\n            item.highlight = false;\n            return item;\n        });\n        subtitles[index].highlight = true;\n        this.updateSubtitles(subtitles);\n    }\n\n    // 更新单个字幕\n    updateSubtitle(index, subtitle) {\n        const subtitles = this.state.subtitles.map(item => {\n            item.highlight = false;\n            item.editing = false;\n            return item;\n        });\n\n        if (subtitle) {\n            subtitle.highlight = true;\n            subtitles[index] = subtitle;\n        } else {\n            const previous = subtitles[index - 1];\n            subtitles.splice(index, 0, {\n                editing: false,\n                highlight: true,\n                id: index,\n                start: previous ? secondToTime(previous.endTime + 0.001) : '00:00:00.000',\n                end: previous ? secondToTime(previous.endTime + 1.001) : '00:00:00.000',\n                text: t('your'),\n            });\n        }\n\n        this.updateSubtitles(subtitles, true).then(() => {\n            toastr.success(t('update'));\n            this.updateCurrentIndex(index);\n        });\n    }\n\n    // 更新视频地址\n    updateVideoUrl(videoUrl) {\n        this.setState({\n            videoUrl,\n        });\n    }\n\n    // 更新字幕地址\n    updateSubtitleUrl(subtitleUrl) {\n        this.setState({\n            subtitleUrl,\n        });\n    }\n\n    // 更新所有字幕数据, 可选是否更新字幕地址和是否回退操作\n    updateSubtitles(subtitles, updateUrl, isUndo) {\n        return new Promise(resolve => {\n            this.setState(\n                {\n                    subtitles: subtitles.map((item, index) => {\n                        const previous = subtitles[index - 1];\n                        return {\n                            ...item,\n                            index: index,\n                            get startTime() {\n                                return timeToSecond(this.start);\n                            },\n                            set startTime(time) {\n                                this.start = secondToTime(clamp(time, 0, Infinity));\n                            },\n                            get endTime() {\n                                return timeToSecond(this.end);\n                            },\n                            set endTime(time) {\n                                this.end = secondToTime(clamp(time, 0, Infinity));\n                            },\n                            get duration() {\n                                return (this.endTime - this.startTime).toFixed(3);\n                            },\n                            get overlapping() {\n                                return previous && this.startTime < previous.endTime;\n                            },\n                        };\n                    }),\n                },\n                () => {\n                    const subtitles = this.state.subtitles;\n                    if (updateUrl) {\n                        this.updateSubtitleUrl(vttToUrl(arrToVtt(subtitles)));\n\n                        if (!isUndo) {\n                            if (this.history.length >= 100) {\n                                this.history.shift();\n                            }\n                            this.history.push(subtitles.map(item => ({ ...item })));\n                        }\n\n                        this.storage.set('subtitles', subtitles);\n                    }\n                    resolve(subtitles);\n                },\n            );\n        });\n    }\n\n    // 从视频当前时间更新当前下标\n    updateCurrentTime(currentTime) {\n        const currentIndex = this.state.subtitles.findIndex(item => {\n            return item.startTime <= currentTime && item.endTime >= currentTime;\n        });\n        this.highlightSubtitle(currentIndex);\n        this.setState(\n            {\n                currentTime,\n                setTime: -1,\n            },\n            () => {\n                this.updateCurrentIndex(currentIndex);\n            },\n        );\n    }\n\n    // 滚动到某个字幕\n    updateCurrentIndex(index) {\n        if (!this.checkIndex(index)) return;\n        this.setState({\n            currentIndex: index,\n        });\n    }\n\n    // 下载字幕\n    downloadSubtitles() {\n        downloadFile(vttToUrl(arrToVtt(this.state.subtitles)), `${Date.now()}.vtt`);\n        toastr.success(t('download'));\n    }\n\n    // 删除空字幕\n    removeEmptySubtitle() {\n        const subtitles = this.state.subtitles.filter(item => item.text.trim());\n        this.updateSubtitles(subtitles, true).then(() => {\n            toastr.success(t('removeEmpty'));\n        });\n    }\n\n    // 删除所有字幕\n    removeAllSubtitle() {\n        this.updateSubtitles([], true).then(() => {\n            toastr.success(t('removeAll'));\n        });\n    }\n\n    // 整体字幕时间偏移\n    timeOffset(time) {\n        const subtitles = this.state.subtitles.map(item => {\n            item.highlight = false;\n            item.editing = false;\n            item.start = secondToTime(clamp(item.startTime + time, 0, Infinity));\n            item.end = secondToTime(clamp(item.endTime + time, 0, Infinity));\n            return item;\n        });\n        this.updateSubtitles(subtitles, true).then(() => {\n            toastr.success(`${t('offset')}: ${time}`);\n        });\n    }\n\n    // 整体字幕翻译\n    translate(land, translator) {\n        if (!this.inTranslation) {\n            if (this.state.subtitles.length <= 1000) {\n                this.inTranslation = true;\n                translate(this.state.subtitles, land, translator)\n                    .then(subtitles => {\n                        this.inTranslation = false;\n                        this.updateSubtitles(subtitles, true).then(() => {\n                            toastr.success(t('translate'));\n                        });\n                    })\n                    .catch(error => {\n                        toastr.error(error.message);\n                        this.inTranslation = false;\n                        throw error;\n                    });\n            } else {\n                toastr.error(t('translateLenght'));\n            }\n        } else {\n            toastr.error(t('translateProgress'));\n        }\n    }\n\n    // 删除缓存\n    removeCache() {\n        this.storage.clean();\n        window.location.reload();\n    }\n\n    // 历史回滚\n    undoSubtitle() {\n        this.history.pop();\n        const subtitles = this.history[this.history.length - 1];\n        if (subtitles) {\n            this.updateSubtitles(subtitles, true, true).then(() => {\n                toastr.success(t('history'));\n            });\n        } else {\n            toastr.warning(t('historyEmpty'));\n        }\n    }\n\n    // 设置语言\n    setLocale(lang) {\n        this.setState(\n            {\n                lang,\n            },\n            () => {\n                setLocale(lang);\n                this.storage.set('lang', lang);\n            },\n        );\n    }\n\n    render() {\n        const props = {\n            ...this.state,\n            checkIndex: this.checkIndex.bind(this),\n            removeSubtitle: this.removeSubtitle.bind(this),\n            editSubtitle: this.editSubtitle.bind(this),\n            highlightSubtitle: this.highlightSubtitle.bind(this),\n            updateSubtitle: this.updateSubtitle.bind(this),\n            updateSubtitles: this.updateSubtitles.bind(this),\n            updateVideoUrl: this.updateVideoUrl.bind(this),\n            updateSubtitleUrl: this.updateSubtitleUrl.bind(this),\n            updateCurrentTime: this.updateCurrentTime.bind(this),\n            updateCurrentIndex: this.updateCurrentIndex.bind(this),\n            downloadSubtitles: this.downloadSubtitles.bind(this),\n            removeEmptySubtitle: this.removeEmptySubtitle.bind(this),\n            removeAllSubtitle: this.removeAllSubtitle.bind(this),\n            timeOffset: this.timeOffset.bind(this),\n            translate: this.translate.bind(this),\n            removeCache: this.removeCache.bind(this),\n            undoSubtitle: this.undoSubtitle.bind(this),\n            setLocale: this.setLocale.bind(this),\n            getArt: this.getArt.bind(this),\n        };\n\n        return (\n            <React.Fragment>\n                <GlobalStyle />\n                <Header {...props} />\n                <Main className=\"main\">\n                    <Subtitle {...props} />\n                    <Player {...props} />\n                </Main>\n                <Timeline {...props} />\n            </React.Fragment>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport toastr from 'toastr';\nimport NProgress from 'nprogress';\nimport * as serviceWorker from './serviceWorker';\nimport { isMobile } from './utils';\nimport { setTranslations, t } from 'react-i18nify';\nimport i18n from './i18n';\nimport 'normalize.css';\nimport './fontello/css/fontello.css';\nimport 'toastr/build/toastr.css';\nimport 'nprogress/nprogress.css';\nimport 'react-virtualized/styles.css';\nimport 'artplayer-react/dist/artplayer-react.css';\n\nsetTranslations(i18n);\ntoastr.options.timeOut = 3000;\ntoastr.options.hideDuration = 300;\nNProgress.configure({ minimum: 0, showSpinner: false });\nReactDOM.render(isMobile() ? t('access') : <App />, document.getElementById('root'));\nserviceWorker.unregister();\n","export default {\n    en: {\n        access: 'Please use a computer to access',\n        delete: 'Delete a subtitle',\n        update: 'Update a subtitle',\n        your: 'Your Subtitle Text',\n        download: 'Download vtt subtitle',\n        removeEmpty: 'Remove empty subtitle',\n        removeAll: 'Remove all subtitle',\n        offset: 'Time offset',\n        translate: 'Translate subtitles',\n        translateLenght: 'Currently translates up to 1000 subtitles at a time',\n        translateProgress: 'Translation is in progress...',\n        history: 'History rollback',\n        historyEmpty: 'History is empty',\n\n        description: 'A Online Subtitle Editor: vtt、srt、ass',\n        uploadSubtitle: 'Upload subtitle file',\n        uploadSubtitleErr: 'Only the following subtitle are supported: vtt、srt、ass',\n        uploadVideo: 'Upload video file',\n        uploadVideoErr: 'This video format is not supported',\n        btnUploadSubtitle: 'Upload Subtitle',\n        btnUploadVideo: 'Upload Video',\n        btnDownloadSubtitle: 'Download Subtitle',\n\n        startTime: 'Start time format needs to match like: [00:00:00.000]',\n        endTime: 'End time format needs to match like: [00:00:00.000]',\n        greater: 'Start time cannot be greater than or equal to the end time',\n        overlaps: 'This time overlaps with the time of the previous one',\n        start: 'Start',\n        end: 'End',\n        duration: 'Duration',\n        text: 'Text',\n        operation: 'Operation',\n\n        durationLimit: 'Set the time longer than the video duration',\n\n        btnAddSubtitle: 'Add Subtitle',\n        btnTimeOffsetMinus: 'Time Offset -100ms',\n        btnTimeOffsetPlus: 'Time Offset +100ms',\n        btnUndo: 'Undo',\n        btnRemoveAll: 'Remove All Subtitle',\n        btnRemoveEmpty: 'Remove Empty Subtitle',\n        btnRemoveCache: 'Remove Cache',\n        btnBatchTranslate: 'Batch Translate',\n        to: 'To',\n        use: 'Use',\n    },\n    zh: {\n        access: '请使用电脑访问',\n        delete: '删除一个字幕',\n        update: '更新一个字幕',\n        your: '你的字幕文本',\n        download: '下载 VTT 字幕',\n        removeEmpty: '删除空的字幕',\n        removeAll: '删除全部字幕',\n        offset: '时间偏移',\n        translate: '翻译字幕',\n        translateLenght: '当前每次最大只能翻译1000条字幕',\n        translateProgress: '字幕翻译正在进行中...',\n        history: '历史回滚',\n        historyEmpty: '历史为空',\n\n        description: '一个在线字幕编辑器：vtt、srt、ass',\n        uploadSubtitle: '上传字幕文件',\n        uploadSubtitleErr: '当前只支持一下字幕: vtt、srt、ass',\n        uploadVideo: '上传视频文件',\n        uploadVideoErr: '该视频格式不支持',\n        btnUploadSubtitle: '上传字幕',\n        btnUploadVideo: '上传视频',\n        btnDownloadSubtitle: '下载字幕',\n\n        startTime: '开始时间的格式需要类似: [00:00:00.000]',\n        endTime: '结束时间的格式需要类似: [00:00:00.000]',\n        greater: '开始时间不能大于结束时间',\n        overlaps: '这个时间与上一条字幕时间重叠',\n        start: '开始',\n        end: '结束',\n        duration: '时长',\n        text: '文本',\n        operation: '操作',\n\n        durationLimit: '设置时间大于视频的时长',\n\n        btnAddSubtitle: '添加字幕',\n        btnTimeOffsetMinus: '时间偏移 -100 毫秒',\n        btnTimeOffsetPlus: '时间偏移 +100毫秒',\n        btnUndo: '回滚',\n        btnRemoveAll: '删除全部字幕',\n        btnRemoveEmpty: '删除空的字幕',\n        btnRemoveCache: '删除缓存',\n        btnBatchTranslate: '批量翻译',\n        to: '到',\n        use: '使用',\n    },\n};\n"],"sourceRoot":""}