{"version":3,"sources":["utils/index.js","utils/assToVtt.js","components/Header.js","components/Subtitle.js","components/Timeline.js","components/Toolset.js","components/Player.js","utils/translate.js","utils/md5.js","components/App.js","serviceWorker.js","index.js"],"names":["checkTime","time","test","clamp","num","a","b","Math","max","min","secondToTime","seconds","moment","duration","format","trim","timeToSecond","asSeconds","urlToArr","url","Promise","resolve","$video","document","createElement","$track","default","kind","appendChild","onload","arr","Array","from","track","cues","map","item","index","editing","highlight","id","start","startTime","end","endTime","text","escapeHTML","this","toFixed","src","vttToUrl","vttText","URL","createObjectURL","Blob","type","arrToVtt","join","srtToVtt","srtText","concat","replace","readSubtitleFromFile","file","reject","reader","FileReader","name","split","pop","toLowerCase","result","ass","re_ass","RegExp","fixTime","length","line","m","match","filter","assToVtt","onerror","error","readAsText","str","tag","momentDurationFormatSetup","Wrapper","styled","header","Logo","Description","span","Btn","div","File","input","Header","$subtitle","React","createRef","current","files","NProgress","then","data","subtitleUrl","props","updateSubtitleUrl","subtitles","updateSubtitles","done","catch","toastr","message","canPlayType","updateVideoUrl","className","href","ref","onChange","uploadSubtitle","bind","uploadVideo","onClick","downloadSubtitles","Component","Subtitle","state","lastCurrentIndex","editIndex","editSubtitle","$table","warning","checkSubtitle","setState","updateSubtitle","value","removeSubtitle","mainHeight","mainWidth","headerHeight","width","height","rowHeight","scrollToIndex","rowCount","rowGetter","headerRowRenderer","style","flex","rowRenderer","key","rowData","overlapping","reverse","maxLength","defaultValue","e","target","disabled","onEdit","onUpdate","onRemove","currentIndex","querySelector","scrollTop","offsetTop","Timeline","Button","button","Select","select","Player","land","addSubtitle","timeOffset","removeAllSubtitle","removeEmptySubtitle","translate","marginRight","event","VideoBox","art","videoUrl","option","subtitle","getInstance","on","playing","updateCurrentTime","currentTime","template","player","switchUrl","init","baiduTranslate","query","appid","salt","Date","now","searchParams","append","string","RotateLeft","lValue","iShiftBits","AddUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","FF","c","d","x","s","ac","y","z","F","GG","G","HH","H","II","I","WordToHex","lCount","WordToHexValue","WordToHexValue_temp","toString","substr","k","AA","BB","CC","DD","lWordCount","lMessageLength","lNumberOfWords_temp1","lNumberOfWords","lWordArray","lBytePosition","lByteCount","charCodeAt","ConvertToWordArray","utftext","n","String","fromCharCode","Utf8Encode","MD5","ms","setTimeout","sleep","fetchJsonp","json","data_1","trans_result","dst","GlobalStyle","createGlobalStyle","Main","App","inTranslation","configure","parent","uddateMainSize","resizeDebounce","func","wait","context","timeout","args","later","apply","clearTimeout","debounce","window","addEventListener","locationUrl","location","decodeURIComponent","get","fetch","response","headers","readSubtitleFromUrl","body","clientHeight","clientWidth","splice","previous","success","findIndex","highlightSubtitle","elink","display","download","click","removeChild","downloadFile","Infinity","limit","pLimit","all","Fragment","Boolean","hostname","options","timeOut","hideDuration","minimum","showSpinner","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1a7bf2b7.chunk.js","sourcesContent":["import moment from 'moment';\nimport momentDurationFormatSetup from 'moment-duration-format';\nimport assToVtt from './assToVtt';\n\nmomentDurationFormatSetup(moment);\n\nexport function checkTime(time) {\n    return /^(\\d+):([0-5][0-9]):([0-5][0-9])\\.\\d{3}$/.test(time);\n}\n\nexport function sleep(ms = 0) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function checkDuration(duration) {\n    return /^\\d+\\.\\d{3}/.test(duration);\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function secondToTime(seconds) {\n    const duration = moment.duration(seconds, 'seconds');\n    return duration.format('hh:mm:ss.SSS', {\n        trim: false,\n    });\n}\n\nexport function timeToSecond(time) {\n    return moment.duration(time).asSeconds();\n}\n\nexport function debounce(func, wait, context) {\n    let timeout;\n    return function fn(...args) {\n        const later = function later() {\n            timeout = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n\nexport function urlToArr(url) {\n    return new Promise(resolve => {\n        const $video = document.createElement('video');\n        const $track = document.createElement('track');\n        $track.default = true;\n        $track.kind = 'metadata';\n        $video.appendChild($track);\n        $track.onload = () => {\n            const arr = Array.from($track.track.cues).map((item, index) => {\n                return {\n                    editing: false,\n                    highlight: false,\n                    id: index,\n                    start: secondToTime(item.startTime),\n                    end: secondToTime(item.endTime),\n                    text: escapeHTML(item.text),\n                    get startTime() {\n                        return timeToSecond(this.start);\n                    },\n                    get endTime() {\n                        return timeToSecond(this.end);\n                    },\n                    get duration() {\n                        return (this.endTime - this.startTime).toFixed(3);\n                    },\n                    get overlapping() {\n                        return arr[index - 1] && this.startTime < arr[index - 1].endTime;\n                    },\n                    get reverse() {\n                        return this.startTime >= this.endTime;\n                    },\n                };\n            });\n            resolve(arr);\n        };\n        $track.src = url;\n    });\n}\n\nexport function vttToUrl(vttText) {\n    return URL.createObjectURL(\n        new Blob([vttText], {\n            type: 'text/vtt',\n        }),\n    );\n}\n\nexport function arrToVtt(arr) {\n    return (\n        'WEBVTT\\n\\n' +\n        arr\n            .map((item, index) => {\n                return (\n                    index + 1 + '\\n' + secondToTime(item.start) + ' --> ' + secondToTime(item.end) + '\\n' + item.text\n                );\n            })\n            .join('\\n\\n')\n    );\n}\n\nexport function srtToVtt(srtText) {\n    return 'WEBVTT \\r\\n\\r\\n'.concat(\n        srtText\n            .replace(/\\{\\\\([ibu])\\}/g, '</$1>')\n            .replace(/\\{\\\\([ibu])1\\}/g, '<$1>')\n            .replace(/\\{([ibu])\\}/g, '<$1>')\n            .replace(/\\{\\/([ibu])\\}/g, '</$1>')\n            .replace(/(\\d\\d:\\d\\d:\\d\\d),(\\d\\d\\d)/g, '$1.$2')\n            .replace(/{[\\s\\S]*?}/g, '')\n            .concat('\\r\\n\\r\\n'),\n    );\n}\n\nexport function readSubtitleFromFile(file) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        const type = file.name\n            .split('.')\n            .pop()\n            .toLowerCase();\n        reader.onload = () => {\n            if (type === 'srt') {\n                resolve(srtToVtt(reader.result));\n            } else if (type === 'ass') {\n                resolve(assToVtt(reader.result));\n            } else {\n                resolve(reader.result.replace(/{[\\s\\S]*?}/g, ''));\n            }\n        };\n        reader.onerror = error => {\n            reject(error);\n        };\n        reader.readAsText(file);\n    });\n}\n\nexport function readSubtitleFromUrl(url) {\n    let type;\n    return fetch(url)\n        .then(response => {\n            type = response.headers.get('Content-Type');\n            return response.text();\n        })\n        .then(text => {\n            if (/x-subrip/gi.test(type)) {\n                return srtToVtt(text);\n            }\n            return text;\n        })\n        .catch(error => {\n            throw error;\n        });\n}\n\nexport function downloadFile(url, name) {\n    const elink = document.createElement('a');\n    elink.style.display = 'none';\n    elink.href = url;\n    elink.download = name;\n    document.body.appendChild(elink);\n    elink.click();\n    document.body.removeChild(elink);\n}\n\nexport function runPromisesInSeries(ps) {\n    return ps.reduce((p, next) => p.then(next), Promise.resolve());\n}\n\nexport function escapeHTML(str) {\n    return str.replace(\n        /[&<>'\"]/g,\n        tag =>\n            ({\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&#39;',\n                '\"': '&quot;',\n            }[tag] || tag),\n    );\n}\n\nexport function unescapeHTML(str) {\n    return str.replace(\n        /&amp;|&lt;|&gt;|&#39;|&quot;/g,\n        tag =>\n            ({\n                '&amp;': '&',\n                '&lt;': '<',\n                '&gt;': '>',\n                '&#39;': \"'\",\n                '&quot;': '\"',\n            }[tag] || tag),\n    );\n}\n","export default function assToVtt(ass) {\n    const re_ass = new RegExp(\n        'Dialogue:\\\\s\\\\d,' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),' +\n            '([^,]*),' +\n            '([^,]*),' +\n            '(?:[^,]*,){4}' +\n            '([\\\\s\\\\S]*)$',\n        'i',\n    );\n\n    function fixTime(time = '') {\n        return time\n            .split(/[:.]/)\n            .map((item, index, arr) => {\n                if (index === arr.length - 1) {\n                    if (item.length === 1) {\n                        return '.' + item + '00';\n                    } else if (item.length === 2) {\n                        return '.' + item + '0';\n                    }\n                } else {\n                    if (item.length === 1) {\n                        return (index === 0 ? '0' : ':0') + item;\n                    }\n                }\n\n                return index === 0 ? item : index === arr.length - 1 ? '.' + item : ':' + item;\n            })\n            .join('');\n    }\n\n    return (\n        'WEBVTT\\n\\n' +\n        ass\n            .split(/\\r?\\n/)\n            .map(line => {\n                const m = line.match(re_ass);\n                if (!m) return null;\n                return {\n                    start: fixTime(m[1].trim()),\n                    end: fixTime(m[2].trim()),\n                    text: m[5]\n                        .replace(/{[\\s\\S]*?}/g, '')\n                        .replace(/(\\\\N)/g, '\\n')\n                        .trim()\n                        .split(/\\r?\\n/)\n                        .map(item => item.trim())\n                        .join('\\n'),\n                };\n            })\n            .filter(line => line)\n            .map((line, index) => {\n                if (line) {\n                    return index + 1 + '\\n' + line.start + ' --> ' + line.end + '\\n' + line.text;\n                } else {\n                    return '';\n                }\n            })\n            .filter(line => line.trim())\n            .join('\\n\\n')\n    );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport toastr from 'toastr';\nimport NProgress from 'nprogress';\nimport { readSubtitleFromFile, urlToArr, vttToUrl } from '../utils';\n\nconst Wrapper = styled.header`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n\n    .left {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        padding-left: 20px;\n    }\n\n    .right {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .links {\n            margin-right: 20px;\n            a {\n                color: #ccc;\n                text-decoration: none;\n                margin-left: 20px;\n\n                &:hover {\n                    color: #fff;\n                }\n            }\n        }\n    }\n`;\n\nconst Logo = styled.a`\n    color: #fff;\n    font-size: 16px;\n    text-decoration: none;\n`;\n\nconst Description = styled.span`\n    font-size: 13px;\n    font-style: italic;\n    padding-left: 20px;\n    opacity: 0.4;\n`;\n\nconst Btn = styled.div`\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    padding: 0 10px;\n    border-left: 1px solid #000;\n    cursor: pointer;\n    overflow: hidden;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n    transition: all .2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n`;\n\nconst File = styled.input`\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n`;\n\nexport default class Header extends React.Component {\n    $subtitle = React.createRef();\n    $video = React.createRef();\n\n    uploadSubtitle() {\n        if (this.$subtitle.current && this.$subtitle.current.files[0]) {\n            NProgress.start();\n            const file = this.$subtitle.current.files[0];\n            const type = file.name\n                .split('.')\n                .pop()\n                .toLowerCase();\n            if (type === 'vtt' || type === 'srt' || type === 'ass') {\n                readSubtitleFromFile(file, type)\n                    .then(data => {\n                        const subtitleUrl = vttToUrl(data);\n                        this.props.updateSubtitleUrl(subtitleUrl);\n                        urlToArr(subtitleUrl).then(subtitles => {\n                            this.props.updateSubtitles(subtitles);\n                            NProgress.done();\n                        });\n                    })\n                    .catch(error => {\n                        toastr.error(error.message);\n                        NProgress.done();\n                        throw error;\n                    });\n            } else {\n                NProgress.done();\n                toastr.error('Only the following subtitle formats are supported: .vtt, .srt, .ass');\n            }\n        }\n    }\n\n    uploadVideo() {\n        if (this.$video.current && this.$video.current.files[0]) {\n            NProgress.start();\n            const file = this.$video.current.files[0];\n            const $video = document.createElement('video');\n            const canPlayType = $video.canPlayType(file.type);\n            if (canPlayType === 'maybe' || canPlayType === 'probably') {\n                const url = URL.createObjectURL(file);\n                this.props.updateVideoUrl(url);\n            } else {\n                toastr.error(`This video format is not supported: ${file.type}`);\n            }\n            NProgress.done();\n        }\n    }\n\n    render() {\n        return (\n            <Wrapper>\n                <div className=\"left\">\n                    <Logo href=\"./\">SubPlayer.js</Logo>\n                    <Description>Online Subtitle Maker</Description>\n                </div>\n                <div className=\"right\">\n                    <div className=\"links\">\n                        <a href=\"https://github.com/zhw2590582/SubPlayer\">Github</a>\n                    </div>\n                    <Btn>\n                        <i className=\"icon-upload\"></i> Upload Subtitle\n                        <File type=\"file\" name=\"file\" ref={this.$subtitle} onChange={this.uploadSubtitle.bind(this)} />\n                    </Btn>\n                    <Btn>\n                        <i className=\"icon-upload\"></i>Upload Video\n                        <File type=\"file\" name=\"file\" ref={this.$video} onChange={this.uploadVideo.bind(this)} />\n                    </Btn>\n                    <Btn onClick={this.props.downloadSubtitles.bind(this)}>\n                        <i className=\"icon-download\"></i>Download Subtitle\n                    </Btn>\n                </div>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport toastr from 'toastr';\nimport { checkTime, timeToSecond, escapeHTML, unescapeHTML } from '../utils';\nimport { Table } from 'react-virtualized';\n\nconst Wrapper = styled.div`\n    flex: 1;\n    border-right: 1px solid rgb(36, 41, 45);\n    .ReactVirtualized__Table {\n        font-size: 12px;\n        background: #24292d;\n\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n\n        .ReactVirtualized__Table__headerRow {\n            background: #1c2022;\n            border-bottom: 1px solid rgb(36, 41, 45);\n\n            .row {\n                padding: 10px 5px;\n                font-style: normal;\n                font-weight: normal;\n                font-size: 14px;\n                text-align: center;\n                text-transform: none;\n            }\n        }\n\n        .ReactVirtualized__Table__row {\n            background-color: #1c2022;\n            border-bottom: 1px solid rgb(36, 41, 45);\n            transition: all 0.2s ease;\n\n            &.odd {\n                background-color: #2e3140;\n            }\n\n            &.highlight {\n                background-color: #2196f3;\n            }\n\n            &.overlapping,\n            &.reverse {\n                background-color: #c75123;\n            }\n\n            .row {\n                padding: 10px 5px;\n                text-align: center;\n            }\n        }\n\n        .input,\n        .textarea {\n            border: none;\n            padding: 5px;\n            min-height: 30px;\n            font-size: 12px;\n            text-align: center;\n            color: #fff;\n            background-color: #3a3a3a;\n        }\n\n        .textarea {\n            resize: vertical;\n        }\n\n        p {\n            line-height: 1.5;\n            margin: 0;\n        }\n    }\n\n    .operation {\n        display: flex;\n        justify-content: center;\n\n        i {\n            width: 25px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n    }\n\n    .edit {\n        display: none;\n        width: 100%;\n        height: 100%;\n    }\n\n    .editing {\n        .noedit {\n            display: none;\n        }\n\n        .edit {\n            display: block;\n        }\n    }\n`;\n\nexport default class Subtitle extends React.Component {\n    state = {\n        lastCurrentIndex: -1,\n        editIndex: -1,\n        editSubtitle: {},\n        $table: this.$table,\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.currentIndex !== state.lastCurrentIndex) {\n            const $subtitle = document.querySelector('.ReactVirtualized__Grid__innerScrollContainer .onhighlight');\n            if ($subtitle) {\n                document.querySelector('.ReactVirtualized__Table__Grid').scrollTop = $subtitle.offsetTop;\n            }\n        }\n\n        return {\n            lastCurrentIndex: props.currentIndex,\n        };\n    }\n\n    checkSubtitle() {\n        const { editIndex, editSubtitle } = this.state;\n        const { subtitles } = this.props;\n        if (editIndex !== -1) {\n            if (!checkTime(editSubtitle.start)) {\n                toastr.error(`Start time format needs to match like: [00:00:00.000]`);\n                return false;\n            }\n\n            if (!checkTime(editSubtitle.end)) {\n                toastr.error(`End time format needs to match like: [00:00:00.000]`);\n                return false;\n            }\n\n            if (timeToSecond(editSubtitle.start) >= timeToSecond(editSubtitle.end)) {\n                toastr.error(`Start time cannot be greater than or equal to the end time`);\n                return false;\n            }\n\n            if (subtitles[editIndex - 1] && timeToSecond(editSubtitle.start) < subtitles[editIndex - 1].endTime) {\n                toastr.warning(`This time overlaps with the time of the previous one`);\n            }\n        }\n        return true;\n    }\n\n    onEdit(index) {\n        if (this.checkSubtitle()) {\n            this.setState({\n                editIndex: index,\n                editSubtitle: {\n                    ...this.props.subtitles[index],\n                },\n            });\n            this.props.editSubtitle(index);\n        }\n    }\n\n    onUpdate() {\n        if (this.checkSubtitle()) {\n            const { editIndex, editSubtitle } = this.state;\n            this.props.updateSubtitle(editIndex, {\n                ...editSubtitle,\n            });\n            this.setState({\n                editIndex: -1,\n                editSubtitle: {},\n            });\n        }\n    }\n\n    onChange(name, value) {\n        this.setState({\n            editSubtitle: {\n                ...this.state.editSubtitle,\n                [name]: value,\n            },\n        });\n    }\n\n    onRemove(index) {\n        this.props.removeSubtitle(index);\n        this.setState({\n            editIndex: -1,\n            editSubtitle: {},\n        });\n    }\n\n    render() {\n        const { subtitles, mainHeight, mainWidth } = this.props;\n        const { editSubtitle, lastCurrentIndex } = this.state;\n        return (\n            <Wrapper>\n                <Table\n                    headerHeight={40}\n                    width={mainWidth / 2}\n                    height={mainHeight}\n                    rowHeight={60}\n                    scrollToIndex={lastCurrentIndex}\n                    rowCount={subtitles.length}\n                    rowGetter={({ index }) => subtitles[index]}\n                    headerRowRenderer={() => {\n                        return (\n                            <div className=\"ReactVirtualized__Table__headerRow\">\n                                <div className=\"row\" style={{ width: 50 }} width=\"50\">\n                                    #\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }} width=\"120\">\n                                    Start\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }} width=\"120\">\n                                    End\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }} width=\"100\">\n                                    Duration\n                                </div>\n                                <div className=\"row\" style={{ flex: 1 }}>\n                                    Text\n                                </div>\n                                <div className=\"row\" style={{ width: 90 }} width=\"100\">\n                                    Operation\n                                </div>\n                            </div>\n                        );\n                    }}\n                    rowRenderer={props => {\n                        return (\n                            <div\n                                key={props.key}\n                                className={[\n                                    props.className,\n                                    props.index % 2 ? 'odd' : '',\n                                    props.rowData.editing ? 'editing' : '',\n                                    props.rowData.highlight ? 'highlight' : '',\n                                    props.rowData.overlapping ? 'overlapping' : '',\n                                    props.rowData.reverse ? 'reverse' : '',\n                                ]\n                                    .join(' ')\n                                    .trim()}\n                                style={props.style}\n                            >\n                                <div className=\"row\" style={{ width: 50 }}>\n                                    {props.index + 1}\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }}>\n                                    <span className=\"noedit\">{props.rowData.start}</span>\n                                    <input\n                                        maxLength={20}\n                                        className=\"input edit\"\n                                        defaultValue={editSubtitle.start}\n                                        onChange={e => this.onChange('start', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }}>\n                                    <span className=\"noedit\">{props.rowData.end}</span>\n                                    <input\n                                        maxLength={20}\n                                        className=\"input edit\"\n                                        defaultValue={editSubtitle.end}\n                                        onChange={e => this.onChange('end', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row\" style={{ width: 100 }}>\n                                    <span className=\"noedit\">{props.rowData.duration}</span>\n                                    <input\n                                        disabled\n                                        maxLength={20}\n                                        className=\"input edit\"\n                                        defaultValue={editSubtitle.duration}\n                                        onChange={e => this.onChange('duration', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row\" style={{ flex: 1 }}>\n                                    <span className=\"noedit\">\n                                        {props.rowData.text.split(/\\r?\\n/).map((item, index) => (\n                                            <p key={index}>{escapeHTML(item)}</p>\n                                        ))}\n                                    </span>\n                                    <textarea\n                                        maxLength={500}\n                                        className=\"textarea edit\"\n                                        value={unescapeHTML(editSubtitle.text || '')}\n                                        onChange={e => this.onChange('text', e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"row operation\" style={{ width: 90 }}>\n                                    <i className=\"icon-pencil noedit\" onClick={() => this.onEdit(props.index)}></i>\n                                    <i className=\"icon-ok edit\" onClick={() => this.onUpdate(props.index)}></i>\n                                    <i className=\"icon-trash-empty\" onClick={() => this.onRemove(props.index)}></i>\n                                </div>\n                            </div>\n                        );\n                    }}\n                ></Table>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n    display: flex;\n    height: 200px;\n    border-top: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n`;\n\nexport default function Timeline() {\n    return <Wrapper>Timeline</Wrapper>;\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n    flex: 1;\n    padding: 10px;\n`;\n\nconst Button = styled.button`\n    height: 25px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    cursor: pointer;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n`;\n\nconst Select = styled.select`\n    height: 30px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n`;\n\nexport default class Player extends React.Component {\n    state = {\n        land: 'zh',\n    };\n\n    render() {\n        return (\n            <Wrapper>\n                <Button onClick={() => this.props.addSubtitle(this.props.subtitles.length)}>\n                    <i className=\"icon-doc-new\"></i>Add Subtitle\n                </Button>\n                <Button onClick={() => this.props.timeOffset(-0.5)}>\n                    <i className=\"icon-minus\"></i>Time Offset -500ms\n                </Button>\n                <Button onClick={() => this.props.timeOffset(0.5)}>\n                    <i className=\"icon-plus\"></i>Time Offset +500ms\n                </Button>\n                <Button onClick={this.props.removeAllSubtitle}>\n                    <i className=\"icon-trash-empty\"></i>Remove All Subtitle\n                </Button>\n                <Button onClick={this.props.removeEmptySubtitle}>\n                    <i className=\"icon-doc-remove\"></i>Remove Empty Subtitle\n                </Button>\n                <div />\n                <Button onClick={() => this.props.translate(this.state.land)}>\n                    <i className=\"icon-google\"></i>Batch Google Translate\n                </Button>\n                <span\n                    style={{\n                        marginRight: 10,\n                    }}\n                >\n                    To\n                </span>\n                <Select\n                    value={this.state.land}\n                    onChange={event => {\n                        this.setState({ land: event.target.value });\n                    }}\n                >\n                    <option value=\"zh\">Chinese Simplified</option>\n                    <option value=\"cht\">Chinese Traditional</option>\n                    <option value=\"en\">English</option>\n                    <option value=\"jp\">Japanese</option>\n                    <option value=\"ru\">Russian</option>\n                    <option value=\"de\">German</option>\n                    <option value=\"fra\">French</option>\n                </Select>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport ArtplayerComponent from 'artplayer-react';\nimport 'artplayer-react/dist/artplayer-react.css';\nimport Toolset from './Toolset';\n\nconst Wrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n`;\n\nconst VideoBox = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 70%;\n    padding: 10px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n\n    .artplayer-video-player .artplayer-subtitle p {\n        background-color: rgba(0, 0, 0, 0.5);\n    }\n`;\n\nexport default class Player extends React.Component {\n    state = {\n        art: null,\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        if (state.art) {\n            const videoUrl = state.art.option.url;\n            const subtitleUrl = state.art.template.$track.src;\n            const currentTime = state.art.currentTime;\n            if (props.videoUrl !== videoUrl) {\n                state.art.player.switchUrl(props.videoUrl);\n            }\n            if (props.subtitleUrl !== subtitleUrl) {\n                state.art.subtitle.init(props.subtitleUrl);\n            }\n            if (!state.art.playing && props.currentTime !== currentTime) {\n                state.art.currentTime = props.currentTime;\n            }\n        }\n        return null;\n    }\n\n    render() {\n        return (\n            <Wrapper>\n                <VideoBox>\n                    {this.props.videoUrl ? (\n                        <ArtplayerComponent\n                            style={{\n                                width: '100%',\n                                height: '100%',\n                            }}\n                            option={{\n                                url: this.props.videoUrl,\n                                subtitle: {\n                                    url: this.props.subtitleUrl,\n                                },\n                            }}\n                            getInstance={art => {\n                                art.on('video:timeupdate', () => {\n                                    if (art.playing) {\n                                        this.props.updateCurrentTime(art.currentTime);\n                                    }\n                                });\n\n                                this.setState({\n                                    art,\n                                });\n                            }}\n                        />\n                    ) : null}\n                </VideoBox>\n                <Toolset {...this.props} />\n            </Wrapper>\n        );\n    }\n}\n","import fetchJsonp from 'fetch-jsonp';\nimport pLimit from 'p-limit';\nimport MD5 from './md5';\nimport { sleep } from './index';\n\nfunction baiduTranslate(query, land) {\n    return new Promise(resolve => {\n        const appid = '20190926000337502';\n        const key = 'AyDT0yVJk43C8mgzspBY';\n        const salt = Date.now();\n\n        const url = new URL('https://fanyi-api.baidu.com/api/trans/vip/translate');\n        url.searchParams.append('q', query);\n        url.searchParams.append('appid', appid);\n        url.searchParams.append('salt', salt);\n        url.searchParams.append('from', 'auto');\n        url.searchParams.append('to', land);\n        url.searchParams.append('sign', MD5(appid + query + salt + key));\n\n        sleep(10).then(async () => {\n            try {\n                const data = await fetchJsonp(url.href);\n                const data_1 = await data.json();\n                if (data_1.trans_result) {\n                    resolve(data_1.trans_result.map(item => item.dst));\n                } else {\n                    resolve([]);\n                }\n            } catch (error) {\n                resolve([]);\n            }\n        });\n    });\n}\n\nexport default function translate(subtitles, land) {\n    const limit = pLimit(1);\n    return Promise.all(\n        subtitles.map(item =>\n            limit(async () => {\n                const data = await baiduTranslate(item.text, land);\n                item.text = data.join('\\n').trim();\n                return item;\n            }),\n        ),\n    );\n}\n","export default function MD5(string) {\n    function RotateLeft(lValue, iShiftBits) {\n        return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));\n    }\n\n    function AddUnsigned(lX, lY) {\n        var lX4, lY4, lX8, lY8, lResult;\n        lX8 = lX & 0x80000000;\n        lY8 = lY & 0x80000000;\n        lX4 = lX & 0x40000000;\n        lY4 = lY & 0x40000000;\n        lResult = (lX & 0x3fffffff) + (lY & 0x3fffffff);\n        if (lX4 & lY4) {\n            return lResult ^ 0x80000000 ^ lX8 ^ lY8;\n        }\n        if (lX4 | lY4) {\n            if (lResult & 0x40000000) {\n                return lResult ^ 0xc0000000 ^ lX8 ^ lY8;\n            } else {\n                return lResult ^ 0x40000000 ^ lX8 ^ lY8;\n            }\n        } else {\n            return lResult ^ lX8 ^ lY8;\n        }\n    }\n\n    function F(x, y, z) {\n        return (x & y) | (~x & z);\n    }\n    function G(x, y, z) {\n        return (x & z) | (y & ~z);\n    }\n    function H(x, y, z) {\n        return x ^ y ^ z;\n    }\n    function I(x, y, z) {\n        return y ^ (x | ~z);\n    }\n\n    function FF(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function GG(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function HH(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function II(a, b, c, d, x, s, ac) {\n        a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n        return AddUnsigned(RotateLeft(a, s), b);\n    }\n\n    function ConvertToWordArray(string) {\n        var lWordCount;\n        var lMessageLength = string.length;\n        var lNumberOfWords_temp1 = lMessageLength + 8;\n        var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64;\n        var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n        var lWordArray = Array(lNumberOfWords - 1);\n        var lBytePosition = 0;\n        var lByteCount = 0;\n        while (lByteCount < lMessageLength) {\n            lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n            lBytePosition = (lByteCount % 4) * 8;\n            lWordArray[lWordCount] = lWordArray[lWordCount] | (string.charCodeAt(lByteCount) << lBytePosition);\n            lByteCount++;\n        }\n        lWordCount = (lByteCount - (lByteCount % 4)) / 4;\n        lBytePosition = (lByteCount % 4) * 8;\n        lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80 << lBytePosition);\n        lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n        lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n        return lWordArray;\n    }\n\n    function WordToHex(lValue) {\n        var WordToHexValue = '',\n            WordToHexValue_temp = '',\n            lByte,\n            lCount;\n        for (lCount = 0; lCount <= 3; lCount++) {\n            lByte = (lValue >>> (lCount * 8)) & 255;\n            WordToHexValue_temp = '0' + lByte.toString(16);\n            WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);\n        }\n        return WordToHexValue;\n    }\n\n    function Utf8Encode(string) {\n        string = string.replace(/\\r\\n/g, '\\n');\n        var utftext = '';\n\n        for (var n = 0; n < string.length; n++) {\n            var c = string.charCodeAt(n);\n\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            } else if (c > 127 && c < 2048) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            } else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n        }\n\n        return utftext;\n    }\n\n    var x = [];\n    var k, AA, BB, CC, DD, a, b, c, d;\n    var S11 = 7,\n        S12 = 12,\n        S13 = 17,\n        S14 = 22;\n    var S21 = 5,\n        S22 = 9,\n        S23 = 14,\n        S24 = 20;\n    var S31 = 4,\n        S32 = 11,\n        S33 = 16,\n        S34 = 23;\n    var S41 = 6,\n        S42 = 10,\n        S43 = 15,\n        S44 = 21;\n\n    string = Utf8Encode(string);\n\n    x = ConvertToWordArray(string);\n\n    a = 0x67452301;\n    b = 0xefcdab89;\n    c = 0x98badcfe;\n    d = 0x10325476;\n\n    for (k = 0; k < x.length; k += 16) {\n        AA = a;\n        BB = b;\n        CC = c;\n        DD = d;\n        a = FF(a, b, c, d, x[k + 0], S11, 0xd76aa478);\n        d = FF(d, a, b, c, x[k + 1], S12, 0xe8c7b756);\n        c = FF(c, d, a, b, x[k + 2], S13, 0x242070db);\n        b = FF(b, c, d, a, x[k + 3], S14, 0xc1bdceee);\n        a = FF(a, b, c, d, x[k + 4], S11, 0xf57c0faf);\n        d = FF(d, a, b, c, x[k + 5], S12, 0x4787c62a);\n        c = FF(c, d, a, b, x[k + 6], S13, 0xa8304613);\n        b = FF(b, c, d, a, x[k + 7], S14, 0xfd469501);\n        a = FF(a, b, c, d, x[k + 8], S11, 0x698098d8);\n        d = FF(d, a, b, c, x[k + 9], S12, 0x8b44f7af);\n        c = FF(c, d, a, b, x[k + 10], S13, 0xffff5bb1);\n        b = FF(b, c, d, a, x[k + 11], S14, 0x895cd7be);\n        a = FF(a, b, c, d, x[k + 12], S11, 0x6b901122);\n        d = FF(d, a, b, c, x[k + 13], S12, 0xfd987193);\n        c = FF(c, d, a, b, x[k + 14], S13, 0xa679438e);\n        b = FF(b, c, d, a, x[k + 15], S14, 0x49b40821);\n        a = GG(a, b, c, d, x[k + 1], S21, 0xf61e2562);\n        d = GG(d, a, b, c, x[k + 6], S22, 0xc040b340);\n        c = GG(c, d, a, b, x[k + 11], S23, 0x265e5a51);\n        b = GG(b, c, d, a, x[k + 0], S24, 0xe9b6c7aa);\n        a = GG(a, b, c, d, x[k + 5], S21, 0xd62f105d);\n        d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);\n        c = GG(c, d, a, b, x[k + 15], S23, 0xd8a1e681);\n        b = GG(b, c, d, a, x[k + 4], S24, 0xe7d3fbc8);\n        a = GG(a, b, c, d, x[k + 9], S21, 0x21e1cde6);\n        d = GG(d, a, b, c, x[k + 14], S22, 0xc33707d6);\n        c = GG(c, d, a, b, x[k + 3], S23, 0xf4d50d87);\n        b = GG(b, c, d, a, x[k + 8], S24, 0x455a14ed);\n        a = GG(a, b, c, d, x[k + 13], S21, 0xa9e3e905);\n        d = GG(d, a, b, c, x[k + 2], S22, 0xfcefa3f8);\n        c = GG(c, d, a, b, x[k + 7], S23, 0x676f02d9);\n        b = GG(b, c, d, a, x[k + 12], S24, 0x8d2a4c8a);\n        a = HH(a, b, c, d, x[k + 5], S31, 0xfffa3942);\n        d = HH(d, a, b, c, x[k + 8], S32, 0x8771f681);\n        c = HH(c, d, a, b, x[k + 11], S33, 0x6d9d6122);\n        b = HH(b, c, d, a, x[k + 14], S34, 0xfde5380c);\n        a = HH(a, b, c, d, x[k + 1], S31, 0xa4beea44);\n        d = HH(d, a, b, c, x[k + 4], S32, 0x4bdecfa9);\n        c = HH(c, d, a, b, x[k + 7], S33, 0xf6bb4b60);\n        b = HH(b, c, d, a, x[k + 10], S34, 0xbebfbc70);\n        a = HH(a, b, c, d, x[k + 13], S31, 0x289b7ec6);\n        d = HH(d, a, b, c, x[k + 0], S32, 0xeaa127fa);\n        c = HH(c, d, a, b, x[k + 3], S33, 0xd4ef3085);\n        b = HH(b, c, d, a, x[k + 6], S34, 0x4881d05);\n        a = HH(a, b, c, d, x[k + 9], S31, 0xd9d4d039);\n        d = HH(d, a, b, c, x[k + 12], S32, 0xe6db99e5);\n        c = HH(c, d, a, b, x[k + 15], S33, 0x1fa27cf8);\n        b = HH(b, c, d, a, x[k + 2], S34, 0xc4ac5665);\n        a = II(a, b, c, d, x[k + 0], S41, 0xf4292244);\n        d = II(d, a, b, c, x[k + 7], S42, 0x432aff97);\n        c = II(c, d, a, b, x[k + 14], S43, 0xab9423a7);\n        b = II(b, c, d, a, x[k + 5], S44, 0xfc93a039);\n        a = II(a, b, c, d, x[k + 12], S41, 0x655b59c3);\n        d = II(d, a, b, c, x[k + 3], S42, 0x8f0ccc92);\n        c = II(c, d, a, b, x[k + 10], S43, 0xffeff47d);\n        b = II(b, c, d, a, x[k + 1], S44, 0x85845dd1);\n        a = II(a, b, c, d, x[k + 8], S41, 0x6fa87e4f);\n        d = II(d, a, b, c, x[k + 15], S42, 0xfe2ce6e0);\n        c = II(c, d, a, b, x[k + 6], S43, 0xa3014314);\n        b = II(b, c, d, a, x[k + 13], S44, 0x4e0811a1);\n        a = II(a, b, c, d, x[k + 4], S41, 0xf7537e82);\n        d = II(d, a, b, c, x[k + 11], S42, 0xbd3af235);\n        c = II(c, d, a, b, x[k + 2], S43, 0x2ad7d2bb);\n        b = II(b, c, d, a, x[k + 9], S44, 0xeb86d391);\n        a = AddUnsigned(a, AA);\n        b = AddUnsigned(b, BB);\n        c = AddUnsigned(c, CC);\n        d = AddUnsigned(d, DD);\n    }\n\n    var temp = WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);\n\n    return temp.toLowerCase();\n}\n","import React from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport NProgress from 'nprogress';\nimport toastr from 'toastr';\nimport Header from './Header';\nimport Subtitle from './Subtitle';\nimport Timeline from './Timeline';\nimport Player from './Player';\nimport {\n    debounce,\n    arrToVtt,\n    vttToUrl,\n    readSubtitleFromUrl,\n    urlToArr,\n    timeToSecond,\n    downloadFile,\n    secondToTime,\n    clamp,\n} from '../utils';\nimport translate from '../utils/translate';\n\nconst GlobalStyle = createGlobalStyle`\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: rgb(16, 17, 19);\n    }\n\n    #toast-container.toast-top-right {\n        top: 60px;\n\n        & > div {\n            box-shadow: none;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n`;\n\nconst Main = styled.div`\n    display: flex;\n    flex: 1;\n`;\n\nlet defaultVideoUrl = 'https://zhw2590582.github.io/assets-cdn/video/one-more-time-one-more-chance-480p.mp4';\nlet defaultSubtitleUrl = 'https://zhw2590582.github.io/assets-cdn/subtitle/one-more-time-one-more-chance.srt';\nexport default class App extends React.Component {\n    state = {\n        mainHeight: 100,\n        mainWidth: 100,\n        videoUrl: '',\n        subtitleUrl: '',\n        currentTime: -1,\n        currentIndex: -1,\n        subtitles: [],\n    };\n\n    componentDidMount() {\n        NProgress.configure({ parent: '.main' });\n        this.uddateMainSize();\n\n        const resizeDebounce = debounce(() => {\n            this.uddateMainSize();\n        }, 500);\n\n        window.addEventListener('resize', resizeDebounce);\n\n        const locationUrl = new URL(window.location.href);\n        const subtitleUrl = decodeURIComponent(locationUrl.searchParams.get('subtitle') || '') || defaultSubtitleUrl;\n        const videoUrl = decodeURIComponent(locationUrl.searchParams.get('video') || '') || defaultVideoUrl;\n\n        readSubtitleFromUrl(subtitleUrl)\n            .then(data => {\n                const subtitleUrl = vttToUrl(data);\n                this.updateSubtitleUrl(subtitleUrl);\n                this.updateVideoUrl(videoUrl);\n                urlToArr(subtitleUrl).then(subtitles => {\n                    this.updateSubtitles(subtitles);\n                });\n            })\n            .catch(error => {\n                toastr.error(error.message);\n                throw error;\n            });\n    }\n\n    uddateMainSize() {\n        this.setState({\n            mainHeight: document.body.clientHeight - 250,\n            mainWidth: document.body.clientWidth,\n        });\n    }\n\n    removeSubtitle(index) {\n        const subtitles = this.state.subtitles;\n        subtitles.splice(index, 1);\n        this.setState(\n            {\n                subtitles,\n            },\n            () => {\n                this.updateSubtitleUrl(vttToUrl(arrToVtt(subtitles)));\n            },\n        );\n    }\n\n    editSubtitle(index) {\n        const subtitles = this.state.subtitles.map(item => {\n            item.highlight = false;\n            item.editing = false;\n            return item;\n        });\n        subtitles[index].editing = true;\n        this.setState({\n            subtitles,\n            currentTime: subtitles[index].startTime + 0.001,\n        });\n    }\n\n    highlightSubtitle(index) {\n        const subtitles = this.state.subtitles.map(item => {\n            item.highlight = false;\n            return item;\n        });\n        subtitles[index].highlight = true;\n        this.setState({\n            subtitles,\n        });\n    }\n\n    updateSubtitle(index, subtitle) {\n        const subtitles = this.state.subtitles.map(item => {\n            item.editing = false;\n            return item;\n        });\n\n        subtitles[index] = {\n            ...subtitle,\n            get startTime() {\n                return timeToSecond(this.start);\n            },\n            get endTime() {\n                return timeToSecond(this.end);\n            },\n            get duration() {\n                return (this.endTime - this.startTime).toFixed(3);\n            },\n            get overlapping() {\n                const previous = subtitles[index - 1];\n                return previous && this.startTime < previous.endTime;\n            },\n            get reverse() {\n                return this.startTime >= this.endTime;\n            },\n        };\n        this.setState(\n            {\n                subtitles,\n            },\n            () => {\n                this.updateSubtitleUrl(vttToUrl(arrToVtt(subtitles)));\n            },\n        );\n    }\n\n    updateVideoUrl(videoUrl) {\n        this.setState(\n            {\n                videoUrl,\n            },\n            () => {\n                toastr.success('Update video successfully');\n            },\n        );\n    }\n\n    updateSubtitleUrl(subtitleUrl) {\n        this.setState(\n            {\n                subtitleUrl,\n            },\n            () => {\n                toastr.success('Update subtitles successfully');\n            },\n        );\n    }\n\n    updateSubtitles(subtitles) {\n        this.setState({\n            subtitles,\n        });\n    }\n\n    updateCurrentTime(currentTime) {\n        const currentIndex = this.state.subtitles.length\n            ? this.state.subtitles.findIndex(item => {\n                  return item.startTime <= currentTime && item.endTime >= currentTime;\n              })\n            : -1;\n        if (currentIndex !== -1) {\n            this.highlightSubtitle(currentIndex);\n        }\n        this.setState({\n            currentIndex,\n        });\n    }\n\n    downloadSubtitles() {\n        downloadFile(vttToUrl(arrToVtt(this.state.subtitles)), `${Date.now()}.vtt`);\n    }\n\n    removeEmptySubtitle() {\n        const subtitles = this.state.subtitles.filter(item => item.text.trim());\n        this.setState(\n            {\n                subtitles,\n            },\n            () => {\n                this.updateSubtitleUrl(vttToUrl(arrToVtt(subtitles)));\n            },\n        );\n    }\n\n    removeAllSubtitle() {\n        this.setState(\n            {\n                subtitles: [],\n            },\n            () => {\n                this.updateSubtitleUrl('');\n            },\n        );\n    }\n\n    addSubtitle(index) {\n        const subtitles = this.state.subtitles;\n        const previous = subtitles[index - 1];\n        subtitles.splice(index, 0, {\n            editing: false,\n            highlight: false,\n            id: index,\n            start: previous ? secondToTime(previous.endTime + 0.001) : '00:00:00.000',\n            end: previous ? secondToTime(previous.endTime + 0.002) : '00:00:00.000',\n            text: 'Your Subtitle Text',\n            get startTime() {\n                return timeToSecond(this.start);\n            },\n            get endTime() {\n                return timeToSecond(this.end);\n            },\n            get duration() {\n                return (this.endTime - this.startTime).toFixed(3);\n            },\n            get overlapping() {\n                return previous && this.startTime < previous.endTime;\n            },\n            get reverse() {\n                return this.startTime >= this.endTime;\n            },\n        });\n        this.setState(\n            {\n                subtitles,\n            },\n            () => {\n                this.updateSubtitleUrl(vttToUrl(arrToVtt(subtitles)));\n                this.setState({\n                    currentIndex: index,\n                });\n            },\n        );\n    }\n\n    timeOffset(time) {\n        const subtitles = this.state.subtitles.map(item => {\n            item.highlight = false;\n            item.editing = false;\n            item.start = secondToTime(clamp(item.startTime + time, 0, Infinity));\n            item.end = secondToTime(clamp(item.endTime + time, 0, Infinity));\n            return item;\n        });\n        this.setState(\n            {\n                subtitles,\n            },\n            () => {\n                this.updateSubtitleUrl(vttToUrl(arrToVtt(subtitles)));\n            },\n        );\n    }\n\n    inTranslation = false;\n    translate(land) {\n        if (this.inTranslation) {\n            return toastr.error('Translation is in progress...');\n        }\n\n        if (this.state.subtitles.length <= 1000) {\n            this.inTranslation = true;\n            NProgress.start();\n            translate(this.state.subtitles, land)\n                .then(subtitles => {\n                    this.inTranslation = false;\n                    NProgress.done();\n                    this.setState(\n                        {\n                            subtitles,\n                        },\n                        () => {\n                            this.updateSubtitleUrl(vttToUrl(arrToVtt(subtitles)));\n                        },\n                    );\n                })\n                .catch(error => {\n                    toastr.error(error.message);\n                    this.inTranslation = false;\n                    NProgress.done();\n                    throw error;\n                });\n        } else {\n            toastr.error('Currently translates up to 1000 subtitles at a time');\n        }\n    }\n\n    render() {\n        const props = {\n            ...this.state,\n            removeSubtitle: this.removeSubtitle.bind(this),\n            editSubtitle: this.editSubtitle.bind(this),\n            highlightSubtitle: this.highlightSubtitle.bind(this),\n            updateSubtitle: this.updateSubtitle.bind(this),\n            updateSubtitles: this.updateSubtitles.bind(this),\n            updateVideoUrl: this.updateVideoUrl.bind(this),\n            updateSubtitleUrl: this.updateSubtitleUrl.bind(this),\n            updateCurrentTime: this.updateCurrentTime.bind(this),\n            downloadSubtitles: this.downloadSubtitles.bind(this),\n            removeEmptySubtitle: this.removeEmptySubtitle.bind(this),\n            removeAllSubtitle: this.removeAllSubtitle.bind(this),\n            addSubtitle: this.addSubtitle.bind(this),\n            timeOffset: this.timeOffset.bind(this),\n            translate: this.translate.bind(this),\n        };\n\n        return (\n            <React.Fragment>\n                <GlobalStyle />\n                <Header {...props} />\n                <Main className=\"main\">\n                    <Subtitle {...props} />\n                    <Player {...props} />\n                </Main>\n                <Timeline {...props} />\n            </React.Fragment>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport 'normalize.css';\nimport './fontello/css/fontello.css';\nimport 'toastr/build/toastr.css';\nimport toastr from 'toastr';\nimport 'nprogress/nprogress.css';\nimport 'react-virtualized/styles.css';\nimport NProgress from 'nprogress';\nimport * as serviceWorker from './serviceWorker';\n\ntoastr.options.timeOut = 3000;\ntoastr.options.hideDuration = 300;\n\nNProgress.configure({ minimum: 0.5, showSpinner: false });\n\nReactDOM.render(<App />, document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}