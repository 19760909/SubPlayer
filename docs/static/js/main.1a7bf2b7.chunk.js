(window.webpackJsonpsubplayer=window.webpackJsonpsubplayer||[]).push([[0],{107:function(t,e,n){t.exports=n(187)},183:function(t,e,n){},187:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(27),o=n.n(a),l=n(40),s=n(17),u=n(18),c=n(20),d=n(19),h=n(21),p=n(9),m=n(10),f=n(14),b=n.n(f),g=n(11),v=n.n(g),y=n(41),x=n.n(y),w=n(93);function S(t){return/^(\d+):([0-5][0-9]):([0-5][0-9])\.\d{3}$/.test(t)}function E(t,e,n){return Math.max(Math.min(t,Math.max(e,n)),Math.min(e,n))}function k(t){return x.a.duration(t,"seconds").format("hh:mm:ss.SSS",{trim:!1})}function O(t){return x.a.duration(t).asSeconds()}function T(t){return new Promise((function(e){var n=document.createElement("video"),r=document.createElement("track");r.default=!0,r.kind="metadata",n.appendChild(r),r.onload=function(){var t=Array.from(r.track.cues).map((function(e,n){return{editing:!1,highlight:!1,id:n,start:k(e.startTime),end:k(e.endTime),text:P(e.text),get startTime(){return O(this.start)},get endTime(){return O(this.end)},get duration(){return(this.endTime-this.startTime).toFixed(3)},get overlapping(){return t[n-1]&&this.startTime<t[n-1].endTime},get reverse(){return this.startTime>=this.endTime}}}));e(t)},r.src=t}))}function j(t){return URL.createObjectURL(new Blob([t],{type:"text/vtt"}))}function C(t){return"WEBVTT\n\n"+t.map((function(t,e){return e+1+"\n"+k(t.start)+" --\x3e "+k(t.end)+"\n"+t.text})).join("\n\n")}function U(t){return"WEBVTT \r\n\r\n".concat(t.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n"))}function N(t){return new Promise((function(e,n){var r=new FileReader,i=t.name.split(".").pop().toLowerCase();r.onload=function(){e("srt"===i?U(r.result):"ass"===i?function(t){var e=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[:.]/).map((function(t,e,n){if(e===n.length-1){if(1===t.length)return"."+t+"00";if(2===t.length)return"."+t+"0"}else if(1===t.length)return(0===e?"0":":0")+t;return 0===e?t:e===n.length-1?"."+t:":"+t})).join("")}return"WEBVTT\n\n"+t.split(/\r?\n/).map((function(t){var r=t.match(e);return r?{start:n(r[1].trim()),end:n(r[2].trim()),text:r[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((function(t){return t.trim()})).join("\n")}:null})).filter((function(t){return t})).map((function(t,e){return t?e+1+"\n"+t.start+" --\x3e "+t.end+"\n"+t.text:""})).filter((function(t){return t.trim()})).join("\n\n")}(r.result):r.result.replace(/{[\s\S]*?}/g,""))},r.onerror=function(t){n(t)},r.readAsText(t)}))}function P(t){return t.replace(/[&<>'"]/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[t]||t}))}function R(){var t=Object(p.a)(["\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n"]);return R=function(){return t},t}function z(){var t=Object(p.a)(["\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    padding: 0 10px;\n    border-left: 1px solid #000;\n    cursor: pointer;\n    overflow: hidden;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n    transition: all .2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n"]);return z=function(){return t},t}function _(){var t=Object(p.a)(["\n    font-size: 13px;\n    font-style: italic;\n    padding-left: 20px;\n    opacity: 0.4;\n"]);return _=function(){return t},t}function D(){var t=Object(p.a)(["\n    color: #fff;\n    font-size: 16px;\n    text-decoration: none;\n"]);return D=function(){return t},t}function V(){var t=Object(p.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n\n    .left {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        padding-left: 20px;\n    }\n\n    .right {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .links {\n            margin-right: 20px;\n            a {\n                color: #ccc;\n                text-decoration: none;\n                margin-left: 20px;\n\n                &:hover {\n                    color: #fff;\n                }\n            }\n        }\n    }\n"]);return V=function(){return t},t}n.n(w)()(x.a);var $=m.b.header(V()),I=m.b.a(D()),A=m.b.span(_()),L=m.b.div(z()),M=m.b.input(R()),W=function(t){function e(){var t,n;Object(s.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(a)))).$subtitle=i.a.createRef(),n.$video=i.a.createRef(),n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"uploadSubtitle",value:function(){var t=this;if(this.$subtitle.current&&this.$subtitle.current.files[0]){b.a.start();var e=this.$subtitle.current.files[0],n=e.name.split(".").pop().toLowerCase();"vtt"===n||"srt"===n||"ass"===n?N(e).then((function(e){var n=j(e);t.props.updateSubtitleUrl(n),T(n).then((function(e){t.props.updateSubtitles(e),b.a.done()}))})).catch((function(t){throw v.a.error(t.message),b.a.done(),t})):(b.a.done(),v.a.error("Only the following subtitle formats are supported: .vtt, .srt, .ass"))}}},{key:"uploadVideo",value:function(){if(this.$video.current&&this.$video.current.files[0]){b.a.start();var t=this.$video.current.files[0],e=document.createElement("video").canPlayType(t.type);if("maybe"===e||"probably"===e){var n=URL.createObjectURL(t);this.props.updateVideoUrl(n)}else v.a.error("This video format is not supported: ".concat(t.type));b.a.done()}}},{key:"render",value:function(){return i.a.createElement($,null,i.a.createElement("div",{className:"left"},i.a.createElement(I,{href:"./"},"SubPlayer.js"),i.a.createElement(A,null,"Online Subtitle Maker")),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"links"},i.a.createElement("a",{href:"https://github.com/zhw2590582/SubPlayer"},"Github")),i.a.createElement(L,null,i.a.createElement("i",{className:"icon-upload"})," Upload Subtitle",i.a.createElement(M,{type:"file",name:"file",ref:this.$subtitle,onChange:this.uploadSubtitle.bind(this)})),i.a.createElement(L,null,i.a.createElement("i",{className:"icon-upload"}),"Upload Video",i.a.createElement(M,{type:"file",name:"file",ref:this.$video,onChange:this.uploadVideo.bind(this)})),i.a.createElement(L,{onClick:this.props.downloadSubtitles.bind(this)},i.a.createElement("i",{className:"icon-download"}),"Download Subtitle")))}}]),e}(i.a.Component),B=n(104);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(){var t=Object(p.a)(["\n    flex: 1;\n    border-right: 1px solid rgb(36, 41, 45);\n    .ReactVirtualized__Table {\n        font-size: 12px;\n        background: #24292d;\n\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n\n        .ReactVirtualized__Table__headerRow {\n            background: #1c2022;\n            border-bottom: 1px solid rgb(36, 41, 45);\n\n            .row {\n                padding: 10px 5px;\n                font-style: normal;\n                font-weight: normal;\n                font-size: 14px;\n                text-align: center;\n                text-transform: none;\n            }\n        }\n\n        .ReactVirtualized__Table__row {\n            background-color: #1c2022;\n            border-bottom: 1px solid rgb(36, 41, 45);\n            transition: all 0.2s ease;\n\n            &.odd {\n                background-color: #2e3140;\n            }\n\n            &.highlight {\n                background-color: #2196f3;\n            }\n\n            &.overlapping,\n            &.reverse {\n                background-color: #c75123;\n            }\n\n            .row {\n                padding: 10px 5px;\n                text-align: center;\n            }\n        }\n\n        .input,\n        .textarea {\n            border: none;\n            padding: 5px;\n            min-height: 30px;\n            font-size: 12px;\n            text-align: center;\n            color: #fff;\n            background-color: #3a3a3a;\n        }\n\n        .textarea {\n            resize: vertical;\n        }\n\n        p {\n            line-height: 1.5;\n            margin: 0;\n        }\n    }\n\n    .operation {\n        display: flex;\n        justify-content: center;\n\n        i {\n            width: 25px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n    }\n\n    .edit {\n        display: none;\n        width: 100%;\n        height: 100%;\n    }\n\n    .editing {\n        .noedit {\n            display: none;\n        }\n\n        .edit {\n            display: block;\n        }\n    }\n"]);return G=function(){return t},t}var H=m.b.div(G()),J=function(t){function e(){var t,n;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={lastCurrentIndex:-1,editIndex:-1,editSubtitle:{},$table:n.$table},n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"checkSubtitle",value:function(){var t=this.state,e=t.editIndex,n=t.editSubtitle,r=this.props.subtitles;if(-1!==e){if(!S(n.start))return v.a.error("Start time format needs to match like: [00:00:00.000]"),!1;if(!S(n.end))return v.a.error("End time format needs to match like: [00:00:00.000]"),!1;if(O(n.start)>=O(n.end))return v.a.error("Start time cannot be greater than or equal to the end time"),!1;r[e-1]&&O(n.start)<r[e-1].endTime&&v.a.warning("This time overlaps with the time of the previous one")}return!0}},{key:"onEdit",value:function(t){this.checkSubtitle()&&(this.setState({editIndex:t,editSubtitle:q({},this.props.subtitles[t])}),this.props.editSubtitle(t))}},{key:"onUpdate",value:function(){if(this.checkSubtitle()){var t=this.state,e=t.editIndex,n=t.editSubtitle;this.props.updateSubtitle(e,q({},n)),this.setState({editIndex:-1,editSubtitle:{}})}}},{key:"onChange",value:function(t,e){this.setState({editSubtitle:q({},this.state.editSubtitle,Object(l.a)({},t,e))})}},{key:"onRemove",value:function(t){this.props.removeSubtitle(t),this.setState({editIndex:-1,editSubtitle:{}})}},{key:"render",value:function(){var t=this,e=this.props,n=e.subtitles,r=e.mainHeight,a=e.mainWidth,o=this.state,l=o.editSubtitle,s=o.lastCurrentIndex;return i.a.createElement(H,null,i.a.createElement(B.a,{headerHeight:40,width:a/2,height:r,rowHeight:60,scrollToIndex:s,rowCount:n.length,rowGetter:function(t){var e=t.index;return n[e]},headerRowRenderer:function(){return i.a.createElement("div",{className:"ReactVirtualized__Table__headerRow"},i.a.createElement("div",{className:"row",style:{width:50},width:"50"},"#"),i.a.createElement("div",{className:"row",style:{width:100},width:"120"},"Start"),i.a.createElement("div",{className:"row",style:{width:100},width:"120"},"End"),i.a.createElement("div",{className:"row",style:{width:100},width:"100"},"Duration"),i.a.createElement("div",{className:"row",style:{flex:1}},"Text"),i.a.createElement("div",{className:"row",style:{width:90},width:"100"},"Operation"))},rowRenderer:function(e){return i.a.createElement("div",{key:e.key,className:[e.className,e.index%2?"odd":"",e.rowData.editing?"editing":"",e.rowData.highlight?"highlight":"",e.rowData.overlapping?"overlapping":"",e.rowData.reverse?"reverse":""].join(" ").trim(),style:e.style},i.a.createElement("div",{className:"row",style:{width:50}},e.index+1),i.a.createElement("div",{className:"row",style:{width:100}},i.a.createElement("span",{className:"noedit"},e.rowData.start),i.a.createElement("input",{maxLength:20,className:"input edit",defaultValue:l.start,onChange:function(e){return t.onChange("start",e.target.value)}})),i.a.createElement("div",{className:"row",style:{width:100}},i.a.createElement("span",{className:"noedit"},e.rowData.end),i.a.createElement("input",{maxLength:20,className:"input edit",defaultValue:l.end,onChange:function(e){return t.onChange("end",e.target.value)}})),i.a.createElement("div",{className:"row",style:{width:100}},i.a.createElement("span",{className:"noedit"},e.rowData.duration),i.a.createElement("input",{disabled:!0,maxLength:20,className:"input edit",defaultValue:l.duration,onChange:function(e){return t.onChange("duration",e.target.value)}})),i.a.createElement("div",{className:"row",style:{flex:1}},i.a.createElement("span",{className:"noedit"},e.rowData.text.split(/\r?\n/).map((function(t,e){return i.a.createElement("p",{key:e},P(t))}))),i.a.createElement("textarea",{maxLength:500,className:"textarea edit",value:(n=l.text||"",n.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,(function(t){return{"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[t]||t}))),onChange:function(e){return t.onChange("text",e.target.value)}})),i.a.createElement("div",{className:"row operation",style:{width:90}},i.a.createElement("i",{className:"icon-pencil noedit",onClick:function(){return t.onEdit(e.index)}}),i.a.createElement("i",{className:"icon-ok edit",onClick:function(){return t.onUpdate(e.index)}}),i.a.createElement("i",{className:"icon-trash-empty",onClick:function(){return t.onRemove(e.index)}})));var n}}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.currentIndex!==e.lastCurrentIndex){var n=document.querySelector(".ReactVirtualized__Grid__innerScrollContainer .onhighlight");n&&(document.querySelector(".ReactVirtualized__Table__Grid").scrollTop=n.offsetTop)}return{lastCurrentIndex:t.currentIndex}}}]),e}(i.a.Component);function Y(){var t=Object(p.a)(["\n    display: flex;\n    height: 200px;\n    border-top: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n"]);return Y=function(){return t},t}var K=m.b.div(Y());function Q(){return i.a.createElement(K,null,"Timeline")}var X=n(101),Z=n.n(X);n(179);function tt(){var t=Object(p.a)(["\n    height: 30px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n"]);return tt=function(){return t},t}function et(){var t=Object(p.a)(["\n    height: 25px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    cursor: pointer;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n"]);return et=function(){return t},t}function nt(){var t=Object(p.a)(["\n    flex: 1;\n    padding: 10px;\n"]);return nt=function(){return t},t}var rt=m.b.div(nt()),it=m.b.button(et()),at=m.b.select(tt()),ot=function(t){function e(){var t,n;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={land:"zh"},n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement(rt,null,i.a.createElement(it,{onClick:function(){return t.props.addSubtitle(t.props.subtitles.length)}},i.a.createElement("i",{className:"icon-doc-new"}),"Add Subtitle"),i.a.createElement(it,{onClick:function(){return t.props.timeOffset(-.5)}},i.a.createElement("i",{className:"icon-minus"}),"Time Offset -500ms"),i.a.createElement(it,{onClick:function(){return t.props.timeOffset(.5)}},i.a.createElement("i",{className:"icon-plus"}),"Time Offset +500ms"),i.a.createElement(it,{onClick:this.props.removeAllSubtitle},i.a.createElement("i",{className:"icon-trash-empty"}),"Remove All Subtitle"),i.a.createElement(it,{onClick:this.props.removeEmptySubtitle},i.a.createElement("i",{className:"icon-doc-remove"}),"Remove Empty Subtitle"),i.a.createElement("div",null),i.a.createElement(it,{onClick:function(){return t.props.translate(t.state.land)}},i.a.createElement("i",{className:"icon-google"}),"Batch Google Translate"),i.a.createElement("span",{style:{marginRight:10}},"To"),i.a.createElement(at,{value:this.state.land,onChange:function(e){t.setState({land:e.target.value})}},i.a.createElement("option",{value:"zh"},"Chinese Simplified"),i.a.createElement("option",{value:"cht"},"Chinese Traditional"),i.a.createElement("option",{value:"en"},"English"),i.a.createElement("option",{value:"jp"},"Japanese"),i.a.createElement("option",{value:"ru"},"Russian"),i.a.createElement("option",{value:"de"},"German"),i.a.createElement("option",{value:"fra"},"French")))}}]),e}(i.a.Component);function lt(){var t=Object(p.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 70%;\n    padding: 10px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n\n    .artplayer-video-player .artplayer-subtitle p {\n        background-color: rgba(0, 0, 0, 0.5);\n    }\n"]);return lt=function(){return t},t}function st(){var t=Object(p.a)(["\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n"]);return st=function(){return t},t}var ut=m.b.div(st()),ct=m.b.div(lt()),dt=function(t){function e(){var t,n;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={art:null},n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement(ut,null,i.a.createElement(ct,null,this.props.videoUrl?i.a.createElement(Z.a,{style:{width:"100%",height:"100%"},option:{url:this.props.videoUrl,subtitle:{url:this.props.subtitleUrl}},getInstance:function(e){e.on("video:timeupdate",(function(){e.playing&&t.props.updateCurrentTime(e.currentTime)})),t.setState({art:e})}}):null),i.a.createElement(ot,this.props))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(e.art){var n=e.art.option.url,r=e.art.template.$track.src,i=e.art.currentTime;t.videoUrl!==n&&e.art.player.switchUrl(t.videoUrl),t.subtitleUrl!==r&&e.art.subtitle.init(t.subtitleUrl),e.art.playing||t.currentTime===i||(e.art.currentTime=t.currentTime)}return null}}]),e}(i.a.Component),ht=n(44),pt=n.n(ht),mt=n(72),ft=n(102),bt=n.n(ft),gt=n(103),vt=n.n(gt);function yt(t,e){return new Promise((function(n){var r="20190926000337502",i=Date.now(),a=new URL("https://fanyi-api.baidu.com/api/trans/vip/translate");a.searchParams.append("q",t),a.searchParams.append("appid",r),a.searchParams.append("salt",i),a.searchParams.append("from","auto"),a.searchParams.append("to",e),a.searchParams.append("sign",function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,r,i,a,o;return i=2147483648&t,a=2147483648&e,o=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^o^i^a:n|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a}function r(t,r,i,a,o,l,s){return t=n(t,n(n(function(t,e,n){return t&e|~t&n}(r,i,a),o),s)),n(e(t,l),r)}function i(t,r,i,a,o,l,s){return t=n(t,n(n(function(t,e,n){return t&n|e&~n}(r,i,a),o),s)),n(e(t,l),r)}function a(t,r,i,a,o,l,s){return t=n(t,n(n(function(t,e,n){return t^e^n}(r,i,a),o),s)),n(e(t,l),r)}function o(t,r,i,a,o,l,s){return t=n(t,n(n(function(t,e,n){return e^(t|~n)}(r,i,a),o),s)),n(e(t,l),r)}function l(t){var e,n="",r="";for(e=0;e<=3;e++)n+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return n}var s,u,c,d,h,p,m,f,b,g;for(s=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),a=Array(i-1),o=0,l=0;l<n;)o=l%4*8,a[e=(l-l%4)/4]=a[e]|t.charCodeAt(l)<<o,l++;return o=l%4*8,a[e=(l-l%4)/4]=a[e]|128<<o,a[i-2]=n<<3,a[i-1]=n>>>29,a}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),m=1732584193,f=4023233417,b=2562383102,g=271733878,u=0;u<s.length;u+=16)c=m,d=f,h=b,p=g,m=r(m,f,b,g,s[u+0],7,3614090360),g=r(g,m,f,b,s[u+1],12,3905402710),b=r(b,g,m,f,s[u+2],17,606105819),f=r(f,b,g,m,s[u+3],22,3250441966),m=r(m,f,b,g,s[u+4],7,4118548399),g=r(g,m,f,b,s[u+5],12,1200080426),b=r(b,g,m,f,s[u+6],17,2821735955),f=r(f,b,g,m,s[u+7],22,4249261313),m=r(m,f,b,g,s[u+8],7,1770035416),g=r(g,m,f,b,s[u+9],12,2336552879),b=r(b,g,m,f,s[u+10],17,4294925233),f=r(f,b,g,m,s[u+11],22,2304563134),m=r(m,f,b,g,s[u+12],7,1804603682),g=r(g,m,f,b,s[u+13],12,4254626195),b=r(b,g,m,f,s[u+14],17,2792965006),m=i(m,f=r(f,b,g,m,s[u+15],22,1236535329),b,g,s[u+1],5,4129170786),g=i(g,m,f,b,s[u+6],9,3225465664),b=i(b,g,m,f,s[u+11],14,643717713),f=i(f,b,g,m,s[u+0],20,3921069994),m=i(m,f,b,g,s[u+5],5,3593408605),g=i(g,m,f,b,s[u+10],9,38016083),b=i(b,g,m,f,s[u+15],14,3634488961),f=i(f,b,g,m,s[u+4],20,3889429448),m=i(m,f,b,g,s[u+9],5,568446438),g=i(g,m,f,b,s[u+14],9,3275163606),b=i(b,g,m,f,s[u+3],14,4107603335),f=i(f,b,g,m,s[u+8],20,1163531501),m=i(m,f,b,g,s[u+13],5,2850285829),g=i(g,m,f,b,s[u+2],9,4243563512),b=i(b,g,m,f,s[u+7],14,1735328473),m=a(m,f=i(f,b,g,m,s[u+12],20,2368359562),b,g,s[u+5],4,4294588738),g=a(g,m,f,b,s[u+8],11,2272392833),b=a(b,g,m,f,s[u+11],16,1839030562),f=a(f,b,g,m,s[u+14],23,4259657740),m=a(m,f,b,g,s[u+1],4,2763975236),g=a(g,m,f,b,s[u+4],11,1272893353),b=a(b,g,m,f,s[u+7],16,4139469664),f=a(f,b,g,m,s[u+10],23,3200236656),m=a(m,f,b,g,s[u+13],4,681279174),g=a(g,m,f,b,s[u+0],11,3936430074),b=a(b,g,m,f,s[u+3],16,3572445317),f=a(f,b,g,m,s[u+6],23,76029189),m=a(m,f,b,g,s[u+9],4,3654602809),g=a(g,m,f,b,s[u+12],11,3873151461),b=a(b,g,m,f,s[u+15],16,530742520),m=o(m,f=a(f,b,g,m,s[u+2],23,3299628645),b,g,s[u+0],6,4096336452),g=o(g,m,f,b,s[u+7],10,1126891415),b=o(b,g,m,f,s[u+14],15,2878612391),f=o(f,b,g,m,s[u+5],21,4237533241),m=o(m,f,b,g,s[u+12],6,1700485571),g=o(g,m,f,b,s[u+3],10,2399980690),b=o(b,g,m,f,s[u+10],15,4293915773),f=o(f,b,g,m,s[u+1],21,2240044497),m=o(m,f,b,g,s[u+8],6,1873313359),g=o(g,m,f,b,s[u+15],10,4264355552),b=o(b,g,m,f,s[u+6],15,2734768916),f=o(f,b,g,m,s[u+13],21,1309151649),m=o(m,f,b,g,s[u+4],6,4149444226),g=o(g,m,f,b,s[u+11],10,3174756917),b=o(b,g,m,f,s[u+2],15,718787259),f=o(f,b,g,m,s[u+9],21,3951481745),m=n(m,c),f=n(f,d),b=n(b,h),g=n(g,p);return(l(m)+l(f)+l(b)+l(g)).toLowerCase()}(r+t+i+"AyDT0yVJk43C8mgzspBY")),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(e){return setTimeout(e,t)}))}(10).then(Object(mt.a)(pt.a.mark((function t(){var e,r;return pt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,bt()(a.href);case 3:return e=t.sent,t.next=6,e.json();case 6:(r=t.sent).trans_result?n(r.trans_result.map((function(t){return t.dst}))):n([]),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n([]);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))))}))}function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(n,!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(){var t=Object(p.a)(["\n    display: flex;\n    flex: 1;\n"]);return St=function(){return t},t}function Et(){var t=Object(p.a)(["\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: rgb(16, 17, 19);\n    }\n\n    #toast-container.toast-top-right {\n        top: 60px;\n\n        & > div {\n            box-shadow: none;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n"]);return Et=function(){return t},t}var kt=Object(m.a)(Et()),Ot=m.b.div(St()),Tt=function(t){function e(){var t,n;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={mainHeight:100,mainWidth:100,videoUrl:"",subtitleUrl:"",currentTime:-1,currentIndex:-1,subtitles:[]},n.inTranslation=!1,n}return Object(h.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;b.a.configure({parent:".main"}),this.uddateMainSize();var e=function(t,e,n){var r;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var l=function(){r=null,t.apply(n,a)};clearTimeout(r),r=setTimeout(l,e)}}((function(){t.uddateMainSize()}),500);window.addEventListener("resize",e);var n=new URL(window.location.href),r=decodeURIComponent(n.searchParams.get("subtitle")||"")||"https://zhw2590582.github.io/assets-cdn/subtitle/one-more-time-one-more-chance.srt",i=decodeURIComponent(n.searchParams.get("video")||"")||"https://zhw2590582.github.io/assets-cdn/video/one-more-time-one-more-chance-480p.mp4";(function(t){var e;return fetch(t).then((function(t){return e=t.headers.get("Content-Type"),t.text()})).then((function(t){return/x-subrip/gi.test(e)?U(t):t})).catch((function(t){throw t}))})(r).then((function(e){var n=j(e);t.updateSubtitleUrl(n),t.updateVideoUrl(i),T(n).then((function(e){t.updateSubtitles(e)}))})).catch((function(t){throw v.a.error(t.message),t}))}},{key:"uddateMainSize",value:function(){this.setState({mainHeight:document.body.clientHeight-250,mainWidth:document.body.clientWidth})}},{key:"removeSubtitle",value:function(t){var e=this,n=this.state.subtitles;n.splice(t,1),this.setState({subtitles:n},(function(){e.updateSubtitleUrl(j(C(n)))}))}},{key:"editSubtitle",value:function(t){var e=this.state.subtitles.map((function(t){return t.highlight=!1,t.editing=!1,t}));e[t].editing=!0,this.setState({subtitles:e,currentTime:e[t].startTime+.001})}},{key:"highlightSubtitle",value:function(t){var e=this.state.subtitles.map((function(t){return t.highlight=!1,t}));e[t].highlight=!0,this.setState({subtitles:e})}},{key:"updateSubtitle",value:function(t,e){var n=this,r=this.state.subtitles.map((function(t){return t.editing=!1,t}));r[t]=wt({},e,{get startTime(){return O(this.start)},get endTime(){return O(this.end)},get duration(){return(this.endTime-this.startTime).toFixed(3)},get overlapping(){var e=r[t-1];return e&&this.startTime<e.endTime},get reverse(){return this.startTime>=this.endTime}}),this.setState({subtitles:r},(function(){n.updateSubtitleUrl(j(C(r)))}))}},{key:"updateVideoUrl",value:function(t){this.setState({videoUrl:t},(function(){v.a.success("Update video successfully")}))}},{key:"updateSubtitleUrl",value:function(t){this.setState({subtitleUrl:t},(function(){v.a.success("Update subtitles successfully")}))}},{key:"updateSubtitles",value:function(t){this.setState({subtitles:t})}},{key:"updateCurrentTime",value:function(t){var e=this.state.subtitles.length?this.state.subtitles.findIndex((function(e){return e.startTime<=t&&e.endTime>=t})):-1;-1!==e&&this.highlightSubtitle(e),this.setState({currentIndex:e})}},{key:"downloadSubtitles",value:function(){!function(t,e){var n=document.createElement("a");n.style.display="none",n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(j(C(this.state.subtitles)),"".concat(Date.now(),".vtt"))}},{key:"removeEmptySubtitle",value:function(){var t=this,e=this.state.subtitles.filter((function(t){return t.text.trim()}));this.setState({subtitles:e},(function(){t.updateSubtitleUrl(j(C(e)))}))}},{key:"removeAllSubtitle",value:function(){var t=this;this.setState({subtitles:[]},(function(){t.updateSubtitleUrl("")}))}},{key:"addSubtitle",value:function(t){var e=this,n=this.state.subtitles,r=n[t-1];n.splice(t,0,{editing:!1,highlight:!1,id:t,start:r?k(r.endTime+.001):"00:00:00.000",end:r?k(r.endTime+.002):"00:00:00.000",text:"Your Subtitle Text",get startTime(){return O(this.start)},get endTime(){return O(this.end)},get duration(){return(this.endTime-this.startTime).toFixed(3)},get overlapping(){return r&&this.startTime<r.endTime},get reverse(){return this.startTime>=this.endTime}}),this.setState({subtitles:n},(function(){e.updateSubtitleUrl(j(C(n))),e.setState({currentIndex:t})}))}},{key:"timeOffset",value:function(t){var e=this,n=this.state.subtitles.map((function(e){return e.highlight=!1,e.editing=!1,e.start=k(E(e.startTime+t,0,1/0)),e.end=k(E(e.endTime+t,0,1/0)),e}));this.setState({subtitles:n},(function(){e.updateSubtitleUrl(j(C(n)))}))}},{key:"translate",value:function(t){var e=this;if(this.inTranslation)return v.a.error("Translation is in progress...");this.state.subtitles.length<=1e3?(this.inTranslation=!0,b.a.start(),function(t,e){var n=vt()(1);return Promise.all(t.map((function(t){return n(Object(mt.a)(pt.a.mark((function n(){var r;return pt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yt(t.text,e);case 2:return r=n.sent,t.text=r.join("\n").trim(),n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)}))))})))}(this.state.subtitles,t).then((function(t){e.inTranslation=!1,b.a.done(),e.setState({subtitles:t},(function(){e.updateSubtitleUrl(j(C(t)))}))})).catch((function(t){throw v.a.error(t.message),e.inTranslation=!1,b.a.done(),t}))):v.a.error("Currently translates up to 1000 subtitles at a time")}},{key:"render",value:function(){var t=wt({},this.state,{removeSubtitle:this.removeSubtitle.bind(this),editSubtitle:this.editSubtitle.bind(this),highlightSubtitle:this.highlightSubtitle.bind(this),updateSubtitle:this.updateSubtitle.bind(this),updateSubtitles:this.updateSubtitles.bind(this),updateVideoUrl:this.updateVideoUrl.bind(this),updateSubtitleUrl:this.updateSubtitleUrl.bind(this),updateCurrentTime:this.updateCurrentTime.bind(this),downloadSubtitles:this.downloadSubtitles.bind(this),removeEmptySubtitle:this.removeEmptySubtitle.bind(this),removeAllSubtitle:this.removeAllSubtitle.bind(this),addSubtitle:this.addSubtitle.bind(this),timeOffset:this.timeOffset.bind(this),translate:this.translate.bind(this)});return i.a.createElement(i.a.Fragment,null,i.a.createElement(kt,null),i.a.createElement(W,t),i.a.createElement(Ot,{className:"main"},i.a.createElement(J,t),i.a.createElement(dt,t)),i.a.createElement(Q,t))}}]),e}(i.a.Component);n(182),n(183),n(184),n(185),n(186),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));v.a.options.timeOut=3e3,v.a.options.hideDuration=300,b.a.configure({minimum:.5,showSpinner:!1}),o.a.render(i.a.createElement(Tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[107,1,2]]]);
//# sourceMappingURL=main.1a7bf2b7.chunk.js.map