(window.webpackJsonpsubplayer=window.webpackJsonpsubplayer||[]).push([[0],{24:function(t,e,n){t.exports=n(50)},49:function(t,e,n){},50:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(17),o=n.n(i),l=n(3),c=n(4),u=n(6),s=n(5),d=n(7),h=n(1),b=n(2);function p(){var t=Object(h.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    padding: 0 10px;\n    border-left: 1px solid #000;\n    cursor: pointer;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n"]);return p=function(){return t},t}function m(){var t=Object(h.a)(["\n    font-size: 13px;\n    font-style: italic;\n    padding-left: 20px;\n    opacity: 0.4;\n"]);return m=function(){return t},t}function f(){var t=Object(h.a)(["\n    color: #fff;\n    font-size: 16px;\n    text-decoration: none;\n"]);return f=function(){return t},t}function g(){var t=Object(h.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n\n    .left {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        padding-left: 20px;\n    }\n\n    .right {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n"]);return g=function(){return t},t}var v=b.b.header(g()),x=b.b.a(f()),y=b.b.span(m()),E=b.b.div(p());function k(){return a.a.createElement(v,null,a.a.createElement("div",{className:"left"},a.a.createElement(x,{href:"./"},"SubPlayer.js"),a.a.createElement(y,null,"a visual online subtitle maker")),a.a.createElement("div",{className:"right"},a.a.createElement(E,null,a.a.createElement("i",{className:"icon-upload"})," Upload Subtitle"),a.a.createElement(E,null,a.a.createElement("i",{className:"icon-upload"}),"Upload Video"),a.a.createElement(E,null,a.a.createElement("i",{className:"icon-download"}),"Download Subtitle")))}var w=n(11),j=n(20);function O(t){return/^(\d+):([0-5][0-9]):([0-5][0-9])\.\d{3}$/.test(t)}function S(t){var e="0.".concat(t.split(".")[1]),n=t.split(".")[0].split(":");return 60*Number(n[0])*60+60*Number(n[1])+Number(n[2])+Number(e)}function U(t){var e=document.createElement("div");e.innerText=t,e.classList.add("notice"),document.body.appendChild(e),setTimeout((function(){document.body.removeChild(e)}),3e3)}function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(n,!0).forEach((function(e){Object(w.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(){var t=Object(h.a)(["\n    flex: 1;\n    border-right: 1px solid rgb(36, 41, 45);\n    overflow-y: hidden;\n    overflow-x: hidden;\n    table {\n        width: 100%;\n        background: #24292d;\n        tr {\n            background: #1c2022;\n            th,\n            td {\n                text-align: center;\n                padding: 10px;\n                background: #1c2022;\n            }\n\n            &.odd {\n                background: #2e3140;\n                td {\n                    background: #2e3140;\n                }\n            }\n\n            &.onhighlight {\n                background-color: #607d8b;\n                td {\n                    background-color: #607d8b;\n                }\n            }\n\n            .input,\n            .textarea {\n                border: none;\n                padding: 5px;\n                min-height: 30px;\n                font-size: 13px;\n                color: #fff;\n                background-color: #3a3a3a;\n            }\n\n            .textarea {\n                resize: vertical;\n            }\n\n            p {\n                line-height: 1;\n                margin: 0;\n            }\n        }\n    }\n\n    .operation {\n        display: flex;\n        justify-content: center;\n        i {\n            width: 30px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n\n        .icon-ok {\n            color: #4caf50;\n        }\n    }\n\n    .edit {\n        display: none;\n        width: 100%;\n        height: 100%;\n    }\n\n    .onedit {\n        .noedit {\n            display: none;\n        }\n        .edit {\n            display: block;\n        }\n    }\n"]);return C=function(){return t},t}var z=b.b.div(C()),P=function(t){function e(){var t,n;Object(l.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(i)))).state={editIndex:-1,editSubtitle:{}},n.$scrollbars=a.a.createRef(),n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"checkSubtitle",value:function(){var t,e=this.state,n=e.editIndex,r=e.editSubtitle;if(-1!==n){if(!O(r.start))return U("Start time format needs to match like: [00:00:00.000]"),!1;if(!O(r.end))return U("End time format needs to match like: [00:00:00.000]"),!1;if(t=r.duration,!/^\d+\.\d{3}/.test(t))return U("Duration time format needs to match like: [00.000]"),!1;if(!r.text.trim().length)return U("Text cannot be empty"),!1}return!0}},{key:"onEdit",value:function(t){this.checkSubtitle()&&(this.setState({editIndex:t,editSubtitle:$({},this.props.subtitles[t])}),this.props.onEdit(t))}},{key:"onUpdate",value:function(){if(this.checkSubtitle()){var t=this.state,e=t.editIndex,n=t.editSubtitle,r=S(n.end)-S(n.start);this.props.onUpdate(e,$({},n,{duration:r.toFixed(3)})),this.setState({editIndex:-1,editSubtitle:{}})}}},{key:"onChange",value:function(t,e){this.setState({editSubtitle:$({},this.state.editSubtitle,Object(w.a)({},t,e))})}},{key:"render",value:function(){var t=this,e=this.props,n=e.subtitles,r=e.onRemove,i=this.state.editSubtitle;return a.a.createElement(z,null,a.a.createElement(j.Scrollbars,{ref:this.$scrollbars,style:{height:"100%"}},a.a.createElement("table",{border:"0",cellSpacing:"1",cellPadding:"0"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{width:"50"},"#"),a.a.createElement("th",{width:"120"},"Start"),a.a.createElement("th",{width:"120"},"End"),a.a.createElement("th",{width:"100"},"Duration"),a.a.createElement("th",null,"Text"),a.a.createElement("th",{width:"100"},"Operation"))),a.a.createElement("tbody",null,n.map((function(e,n){return a.a.createElement("tr",{key:n,className:[e.$edit?"onedit":"",n%2===0?"even":"odd",e.$highlight?"onhighlight":""].join(" ").trim()},a.a.createElement("td",null,n+1),a.a.createElement("td",null,a.a.createElement("span",{className:"noedit"},e.start),a.a.createElement("input",{maxLength:20,className:"input edit",defaultValue:i.start,onChange:function(e){return t.onChange("start",e.target.value)}})),a.a.createElement("td",null,a.a.createElement("span",{className:"noedit"},e.end),a.a.createElement("input",{maxLength:20,className:"input edit",defaultValue:i.end,onChange:function(e){return t.onChange("end",e.target.value)}})),a.a.createElement("td",null,a.a.createElement("span",{className:"noedit"},e.duration),a.a.createElement("input",{disabled:!0,maxLength:20,className:"input edit",defaultValue:i.duration,onChange:function(e){return t.onChange("duration",e.target.value)}})),a.a.createElement("td",null,a.a.createElement("span",{className:"noedit"},e.text.split(/\r?\n/).map((function(t,e){return a.a.createElement("p",{key:e},t)}))),a.a.createElement("textarea",{maxLength:500,className:"textarea edit",value:i.text,onChange:function(e){return t.onChange("text",e.target.value)}})),a.a.createElement("td",{className:"operation"},a.a.createElement("i",{className:"icon-pencil noedit",onClick:function(){return t.onEdit(n)}}),a.a.createElement("i",{className:"icon-ok edit",onClick:function(){return t.onUpdate(n)}}),a.a.createElement("i",{className:"icon-trash-empty",onClick:function(){return r(n)}})))}))))))}}]),e}(a.a.Component);function D(){var t=Object(h.a)(["\n    display: flex;\n    height: 200px;\n    border-top: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n"]);return D=function(){return t},t}var W=b.b.div(D());function H(){return a.a.createElement(W,null,"Timeline")}var I=n(21),T=n.n(I);n(47);function V(){var t=Object(h.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 70%;\n    padding: 20px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n\n    video {\n        height: 100%;\n    }\n"]);return V=function(){return t},t}function q(){var t=Object(h.a)(["\n    flex: 1;\n"]);return q=function(){return t},t}var L=b.b.div(q()),A=b.b.div(V()),M=function(t){function e(){var t,n;Object(l.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).state={art:null},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return a.a.createElement(L,null,a.a.createElement(A,null,this.props.videoUrl&&this.props.subtitleUrl?a.a.createElement(T.a,{style:{width:"100%",height:"100%"},option:{url:this.props.videoUrl,subtitle:{url:this.props.subtitleUrl}},getInstance:function(e){t.setState({art:e})}}):null))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(e.art){var n=e.art.option.url,r=e.art.template.$track.src;t.videoUrl!==n&&e.art.player.switchUrl(t.videoUrl),t.subtitleUrl!==r&&e.art.subtitle.init(t.subtitleUrl)}return null}}]),e}(a.a.Component);function F(){var t=Object(h.a)(["\n    display: flex;\n"]);return F=function(){return t},t}function R(){var t=Object(h.a)(["\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: rgb(16, 17, 19);\n    }\n\n    .notice {\n        position: fixed;\n        z-index: 99;\n        top: 10px;\n        left: 50%;\n        transform: translate(-50%);\n        font-size: 13px;\n        color: #fff;\n        background: #e0271a;\n        padding: 7px 20px;\n        border-radius: 3px;\n    }\n"]);return R=function(){return t},t}var B=Object(b.a)(R()),J=b.b.div(F()),G=function(t){function e(){var t,n;Object(l.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).state={mainHeight:100,videoUrl:"https://zhw2590582.github.io/assets-cdn/video/one-more-time-one-more-chance-480p.mp4",subtitleUrl:"https://zhw2590582.github.io/assets-cdn/subtitle/one-more-time-one-more-chance.srt",subtitles:[{$edit:!1,$highlight:!1,start:"0:00:01.981",end:"0:00:04.682",duration:"2.701",text:"We're quite content to be the odd browser out."},{$edit:!1,$highlight:!1,start:"0:00:01.981",end:"0:00:04.682",duration:"2.701",text:"We're quite content to be the odd browser out."},{$edit:!1,$highlight:!1,start:"0:00:01.981",end:"0:00:04.682",duration:"2.701",text:"We're quite content to be the odd browser out."},{$edit:!1,$highlight:!1,start:"0:00:01.981",end:"0:00:04.682",duration:"2.701",text:"We're quite content to be the odd browser out."},{$edit:!1,$highlight:!1,start:"0:00:01.981",end:"0:00:04.682",duration:"2.701",text:"We're quite content to be the odd browser out."},{$edit:!1,$highlight:!1,start:"0:00:01.981",end:"0:00:04.682",duration:"2.701",text:"We're quite content to be the odd browser out."}]},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.uddateMainHeight();var e=function(t,e,n){var r;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var l=function(){r=null,t.apply(n,i)};clearTimeout(r),r=setTimeout(l,e)}}((function(){t.uddateMainHeight()}),500);window.addEventListener("resize",e)}},{key:"uddateMainHeight",value:function(){this.setState({mainHeight:document.body.clientHeight-250})}},{key:"removeSubtitle",value:function(t){var e=this.state.subtitles.slice();e.splice(t,1),this.setState({subtitles:e})}},{key:"editSubtitle",value:function(t){var e=this.state.subtitles.slice().map((function(t){return t.$edit=!1,t}));e[t].$edit=!0,this.setState({subtitles:e})}},{key:"updateSubtitle",value:function(t,e){var n=this.state.subtitles.slice().map((function(t){return t.$edit=!1,t}));n[t]=e,this.setState({subtitles:n})}},{key:"updateVideoUrl",value:function(t){this.setState({videoUrl:t})}},{key:"updateSubtitleUrl",value:function(t){this.setState({subtitleUrl:t})}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(B,null),a.a.createElement(k,{onUpdateSubtitleUrl:this.updateSubtitleUrl.bind(this),onUpdateVideoUrl:this.updateVideoUrl.bind(this)}),a.a.createElement(J,{style:{height:"".concat(this.state.mainHeight,"px")}},a.a.createElement(P,{subtitles:this.state.subtitles,onEdit:this.editSubtitle.bind(this),onUpdate:this.updateSubtitle.bind(this),onRemove:this.removeSubtitle.bind(this)}),a.a.createElement(M,{videoUrl:this.state.videoUrl,subtitleUrl:this.state.subtitleUrl})),a.a.createElement(H,null))}}]),e}(a.a.Component);n(48),n(49),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.ce38abc8.chunk.js.map