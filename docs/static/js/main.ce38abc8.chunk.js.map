{"version":3,"sources":["components/Header.js","utils/index.js","components/Subtitle.js","components/Timeline.js","components/Player.js","components/App.js","serviceWorker.js","index.js"],"names":["Wrapper","styled","header","Logo","a","Description","span","Btn","div","Header","className","href","checkTime","time","test","timeToSecond","fractional","split","integerArr","Number","notice","text","$el","document","createElement","innerText","classList","add","body","appendChild","setTimeout","removeChild","Subtitle","state","editIndex","editSubtitle","$scrollbars","React","createRef","duration","this","start","end","trim","length","index","checkSubtitle","setState","props","subtitles","onEdit","onUpdate","toFixed","name","value","onRemove","ref","style","height","border","cellSpacing","cellPadding","width","map","item","key","$edit","$highlight","join","maxLength","defaultValue","onChange","e","target","disabled","onClick","Component","Timeline","VideoWrapper","Player","art","videoUrl","subtitleUrl","option","url","subtitle","getInstance","template","$track","src","player","switchUrl","init","GlobalStyle","createGlobalStyle","Main","App","mainHeight","uddateMainHeight","resizeDebounce","func","wait","context","timeout","args","later","apply","clearTimeout","debounce","window","addEventListener","clientHeight","slice","splice","Fragment","onUpdateSubtitleUrl","updateSubtitleUrl","bind","onUpdateVideoUrl","updateVideoUrl","updateSubtitle","removeSubtitle","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ce38abc8.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.header`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n\n    .left {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        padding-left: 20px;\n    }\n\n    .right {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n`;\n\nconst Logo = styled.a`\n    color: #fff;\n    font-size: 16px;\n    text-decoration: none;\n`;\n\nconst Description = styled.span`\n    font-size: 13px;\n    font-style: italic;\n    padding-left: 20px;\n    opacity: 0.4;\n`;\n\nconst Btn = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    padding: 0 10px;\n    border-left: 1px solid #000;\n    cursor: pointer;\n    color: #ccc;\n    background-color: rgb(39, 41, 54);\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(51, 54, 76);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n`;\n\nexport default function Header() {\n    return (\n        <Wrapper>\n            <div className=\"left\">\n                <Logo href=\"./\">SubPlayer.js</Logo>\n                <Description>a visual online subtitle maker</Description>\n            </div>\n            <div className=\"right\">\n                <Btn>\n                    <i className=\"icon-upload\"></i> Upload Subtitle\n                </Btn>\n                <Btn>\n                    <i className=\"icon-upload\"></i>Upload Video\n                </Btn>\n                <Btn>\n                    <i className=\"icon-download\"></i>Download Subtitle\n                </Btn>\n            </div>\n        </Wrapper>\n    );\n}\n","export function checkTime(time) {\n    return /^(\\d+):([0-5][0-9]):([0-5][0-9])\\.\\d{3}$/.test(time);\n}\n\nexport function checkDuration(duration) {\n    return /^\\d+\\.\\d{3}/.test(duration);\n}\n\nexport function sleep(ms = 0) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function timeToSecond(time) {\n    const fractional = `0.${time.split('.')[1]}`;\n    const integerArr = time.split('.')[0].split(':');\n    return Number(integerArr[0]) * 60 * 60 + Number(integerArr[1]) * 60 + Number(integerArr[2]) + Number(fractional);\n}\n\nexport function debounce(func, wait, context) {\n    let timeout;\n    return function fn(...args) {\n        const later = function later() {\n            timeout = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n\nexport function notice(text) {\n    const $el = document.createElement('div');\n    $el.innerText = text;\n    $el.classList.add('notice');\n    document.body.appendChild($el);\n    setTimeout(() => {\n        document.body.removeChild($el);\n    }, 3000);\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport { checkTime, checkDuration, notice, timeToSecond } from '../utils';\n\nconst Wrapper = styled.div`\n    flex: 1;\n    border-right: 1px solid rgb(36, 41, 45);\n    overflow-y: hidden;\n    overflow-x: hidden;\n    table {\n        width: 100%;\n        background: #24292d;\n        tr {\n            background: #1c2022;\n            th,\n            td {\n                text-align: center;\n                padding: 10px;\n                background: #1c2022;\n            }\n\n            &.odd {\n                background: #2e3140;\n                td {\n                    background: #2e3140;\n                }\n            }\n\n            &.onhighlight {\n                background-color: #607d8b;\n                td {\n                    background-color: #607d8b;\n                }\n            }\n\n            .input,\n            .textarea {\n                border: none;\n                padding: 5px;\n                min-height: 30px;\n                font-size: 13px;\n                color: #fff;\n                background-color: #3a3a3a;\n            }\n\n            .textarea {\n                resize: vertical;\n            }\n\n            p {\n                line-height: 1;\n                margin: 0;\n            }\n        }\n    }\n\n    .operation {\n        display: flex;\n        justify-content: center;\n        i {\n            width: 30px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n\n        .icon-ok {\n            color: #4caf50;\n        }\n    }\n\n    .edit {\n        display: none;\n        width: 100%;\n        height: 100%;\n    }\n\n    .onedit {\n        .noedit {\n            display: none;\n        }\n        .edit {\n            display: block;\n        }\n    }\n`;\n\nexport default class Subtitle extends React.Component {\n    state = {\n        editIndex: -1,\n        editSubtitle: {},\n    };\n\n    $scrollbars = React.createRef();\n\n    checkSubtitle() {\n        const { editIndex, editSubtitle } = this.state;\n        if (editIndex !== -1) {\n            if (!checkTime(editSubtitle.start)) {\n                notice(`Start time format needs to match like: [00:00:00.000]`);\n                return false;\n            }\n            if (!checkTime(editSubtitle.end)) {\n                notice(`End time format needs to match like: [00:00:00.000]`);\n                return false;\n            }\n            if (!checkDuration(editSubtitle.duration)) {\n                notice(`Duration time format needs to match like: [00.000]`);\n                return false;\n            }\n            if (!editSubtitle.text.trim().length) {\n                notice('Text cannot be empty');\n                return false;\n            }\n        }\n        return true;\n    }\n\n    onEdit(index) {\n        if (this.checkSubtitle()) {\n            this.setState({\n                editIndex: index,\n                editSubtitle: {\n                    ...this.props.subtitles[index],\n                },\n            });\n            this.props.onEdit(index);\n        }\n    }\n\n    onUpdate() {\n        if (this.checkSubtitle()) {\n            const { editIndex, editSubtitle } = this.state;\n            const duration = timeToSecond(editSubtitle.end) - timeToSecond(editSubtitle.start);\n            this.props.onUpdate(editIndex, {\n                ...editSubtitle,\n                duration: duration.toFixed(3),\n            });\n            this.setState({\n                editIndex: -1,\n                editSubtitle: {},\n            });\n        }\n    }\n\n    onChange(name, value) {\n        this.setState({\n            editSubtitle: {\n                ...this.state.editSubtitle,\n                [name]: value,\n            },\n        });\n    }\n\n    render() {\n        const { subtitles, onRemove } = this.props;\n        const { editSubtitle } = this.state;\n        return (\n            <Wrapper>\n                <Scrollbars ref={this.$scrollbars} style={{ height: '100%' }}>\n                    <table border=\"0\" cellSpacing=\"1\" cellPadding=\"0\">\n                        <thead>\n                            <tr>\n                                <th width=\"50\">#</th>\n                                <th width=\"120\">Start</th>\n                                <th width=\"120\">End</th>\n                                <th width=\"100\">Duration</th>\n                                <th>Text</th>\n                                <th width=\"100\">Operation</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {subtitles.map((item, index) => (\n                                <tr\n                                    key={index}\n                                    className={[\n                                        item.$edit ? 'onedit' : '',\n                                        index % 2 === 0 ? 'even' : 'odd',\n                                        item.$highlight ? 'onhighlight' : '',\n                                    ]\n                                        .join(' ')\n                                        .trim()}\n                                >\n                                    <td>{index + 1}</td>\n                                    <td>\n                                        <span className=\"noedit\">{item.start}</span>\n                                        <input\n                                            maxLength={20}\n                                            className=\"input edit\"\n                                            defaultValue={editSubtitle.start}\n                                            onChange={e => this.onChange('start', e.target.value)}\n                                        />\n                                    </td>\n                                    <td>\n                                        <span className=\"noedit\">{item.end}</span>\n                                        <input\n                                            maxLength={20}\n                                            className=\"input edit\"\n                                            defaultValue={editSubtitle.end}\n                                            onChange={e => this.onChange('end', e.target.value)}\n                                        />\n                                    </td>\n                                    <td>\n                                        <span className=\"noedit\">{item.duration}</span>\n                                        <input\n                                            disabled\n                                            maxLength={20}\n                                            className=\"input edit\"\n                                            defaultValue={editSubtitle.duration}\n                                            onChange={e => this.onChange('duration', e.target.value)}\n                                        />\n                                    </td>\n                                    <td>\n                                        <span className=\"noedit\">\n                                            {item.text.split(/\\r?\\n/).map((item, index) => (\n                                                <p key={index}>{item}</p>\n                                            ))}\n                                        </span>\n                                        <textarea\n                                            maxLength={500}\n                                            className=\"textarea edit\"\n                                            value={editSubtitle.text}\n                                            onChange={e => this.onChange('text', e.target.value)}\n                                        />\n                                    </td>\n                                    <td className=\"operation\">\n                                        <i className=\"icon-pencil noedit\" onClick={() => this.onEdit(index)}></i>\n                                        <i className=\"icon-ok edit\" onClick={() => this.onUpdate(index)}></i>\n                                        <i className=\"icon-trash-empty\" onClick={() => onRemove(index)}></i>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </Scrollbars>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n    display: flex;\n    height: 200px;\n    border-top: 1px solid rgb(36, 41, 45);\n    background-color: rgb(28, 32, 34);\n`;\n\nexport default function Timeline() {\n    return <Wrapper>Timeline</Wrapper>;\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport ArtplayerComponent from 'artplayer-react';\nimport 'artplayer-react/dist/artplayer-react.css';\n\nconst Wrapper = styled.div`\n    flex: 1;\n`;\n\nconst VideoWrapper = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 70%;\n    padding: 20px;\n    border-bottom: 1px solid rgb(36, 41, 45);\n\n    video {\n        height: 100%;\n    }\n`;\n\nexport default class Player extends React.Component {\n    state = {\n        art: null,\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        if (state.art) {\n            const videoUrl = state.art.option.url;\n            const subtitleUrl = state.art.template.$track.src;\n            if (props.videoUrl !== videoUrl) {\n                state.art.player.switchUrl(props.videoUrl);\n            }\n            if (props.subtitleUrl !== subtitleUrl) {\n                state.art.subtitle.init(props.subtitleUrl);\n            }\n        }\n        return null;\n    }\n\n    render() {\n        return (\n            <Wrapper>\n                <VideoWrapper>\n                    {this.props.videoUrl && this.props.subtitleUrl ? (\n                        <ArtplayerComponent\n                            style={{\n                                width: '100%',\n                                height: '100%',\n                            }}\n                            option={{\n                                url: this.props.videoUrl,\n                                subtitle: {\n                                    url: this.props.subtitleUrl,\n                                },\n                            }}\n                            getInstance={art => {\n                                this.setState({\n                                    art,\n                                });\n                            }}\n                        />\n                    ) : null}\n                </VideoWrapper>\n            </Wrapper>\n        );\n    }\n}\n","import React from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport Header from './Header';\nimport Subtitle from './Subtitle';\nimport Timeline from './Timeline';\nimport Player from './Player';\nimport { debounce } from '../utils';\n\nconst GlobalStyle = createGlobalStyle`\n    html,\n    body,\n    #root {\n        height: 100%;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: rgb(16, 17, 19);\n    }\n\n    .notice {\n        position: fixed;\n        z-index: 99;\n        top: 10px;\n        left: 50%;\n        transform: translate(-50%);\n        font-size: 13px;\n        color: #fff;\n        background: #e0271a;\n        padding: 7px 20px;\n        border-radius: 3px;\n    }\n`;\n\nconst Main = styled.div`\n    display: flex;\n`;\n\nexport default class App extends React.Component {\n    state = {\n        mainHeight: 100,\n        videoUrl: 'https://zhw2590582.github.io/assets-cdn/video/one-more-time-one-more-chance-480p.mp4',\n        subtitleUrl: 'https://zhw2590582.github.io/assets-cdn/subtitle/one-more-time-one-more-chance.srt',\n        subtitles: [\n            {\n                $edit: false,\n                $highlight: false,\n                start: '0:00:01.981',\n                end: '0:00:04.682',\n                duration: '2.701',\n                text: `We're quite content to be the odd browser out.`,\n            },\n            {\n                $edit: false,\n                $highlight: false,\n                start: '0:00:01.981',\n                end: '0:00:04.682',\n                duration: '2.701',\n                text: `We're quite content to be the odd browser out.`,\n            },\n            {\n                $edit: false,\n                $highlight: false,\n                start: '0:00:01.981',\n                end: '0:00:04.682',\n                duration: '2.701',\n                text: `We're quite content to be the odd browser out.`,\n            },\n            {\n                $edit: false,\n                $highlight: false,\n                start: '0:00:01.981',\n                end: '0:00:04.682',\n                duration: '2.701',\n                text: `We're quite content to be the odd browser out.`,\n            },\n            {\n                $edit: false,\n                $highlight: false,\n                start: '0:00:01.981',\n                end: '0:00:04.682',\n                duration: '2.701',\n                text: `We're quite content to be the odd browser out.`,\n            },\n            {\n                $edit: false,\n                $highlight: false,\n                start: '0:00:01.981',\n                end: '0:00:04.682',\n                duration: '2.701',\n                text: `We're quite content to be the odd browser out.`,\n            },\n        ],\n    };\n\n    componentDidMount() {\n        this.uddateMainHeight();\n\n        const resizeDebounce = debounce(() => {\n            this.uddateMainHeight();\n        }, 500);\n\n        window.addEventListener('resize', resizeDebounce);\n    }\n\n    uddateMainHeight() {\n        this.setState({\n            mainHeight: document.body.clientHeight - 250,\n        });\n    }\n\n    removeSubtitle(index) {\n        const subtitles = this.state.subtitles.slice();\n        subtitles.splice(index, 1);\n        this.setState({\n            subtitles,\n        });\n    }\n\n    editSubtitle(index) {\n        const subtitles = this.state.subtitles.slice().map(item => {\n            item.$edit = false;\n            return item;\n        });\n        subtitles[index].$edit = true;\n        this.setState({\n            subtitles,\n        });\n    }\n\n    updateSubtitle(index, subtitle) {\n        const subtitles = this.state.subtitles.slice().map(item => {\n            item.$edit = false;\n            return item;\n        });\n        subtitles[index] = subtitle;\n        this.setState({\n            subtitles,\n        });\n    }\n\n    updateVideoUrl(videoUrl) {\n        this.setState({\n            videoUrl,\n        });\n    }\n\n    updateSubtitleUrl(subtitleUrl) {\n        this.setState({\n            subtitleUrl,\n        });\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <GlobalStyle />\n                <Header\n                    onUpdateSubtitleUrl={this.updateSubtitleUrl.bind(this)}\n                    onUpdateVideoUrl={this.updateVideoUrl.bind(this)}\n                />\n                <Main\n                    style={{\n                        height: `${this.state.mainHeight}px`,\n                    }}\n                >\n                    <Subtitle\n                        subtitles={this.state.subtitles}\n                        onEdit={this.editSubtitle.bind(this)}\n                        onUpdate={this.updateSubtitle.bind(this)}\n                        onRemove={this.removeSubtitle.bind(this)}\n                    />\n                    <Player videoUrl={this.state.videoUrl} subtitleUrl={this.state.subtitleUrl} />\n                </Main>\n                <Timeline />\n            </React.Fragment>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport 'normalize.css';\nimport './fontello/css/fontello.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}